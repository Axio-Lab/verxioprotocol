'use strict';var reactHookForm=require('react-hook-form'),zod=require('@hookform/resolvers/zod'),V=require('zod'),core=require('@verxioprotocol/core'),umi=require('@metaplex-foundation/umi'),w=require('react'),reactSlot=require('@radix-ui/react-slot'),clsx=require('clsx'),tailwindMerge=require('tailwind-merge');require('bs58'),require('@metaplex-foundation/umi-web3js-adapters'),require('@solana/web3.js');var Q=require('@radix-ui/react-label'),classVarianceAuthority=require('class-variance-authority');function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k]}});}})}n.default=e;return Object.freeze(n)}var V__namespace=/*#__PURE__*/_interopNamespace(V);var w__namespace=/*#__PURE__*/_interopNamespace(w);var Q__namespace=/*#__PURE__*/_interopNamespace(Q);var je=Object.defineProperty,Ke=Object.defineProperties;var Ie=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var te=(o,n,a)=>n in o?je(o,n,{enumerable:true,configurable:true,writable:true,value:a}):o[n]=a,N=(o,n)=>{for(var a in n||(n={}))se.call(n,a)&&te(o,a,n[a]);if(E)for(var a of E(n))oe.call(n,a)&&te(o,a,n[a]);return o},q=(o,n)=>Ke(o,Ie(n));var A=(o,n)=>{var a={};for(var t in o)se.call(o,t)&&n.indexOf(t)<0&&(a[t]=o[t]);if(o!=null&&E)for(var t of E(o))n.indexOf(t)<0&&oe.call(o,t)&&(a[t]=o[t]);return a};function P(...o){return tailwindMerge.twMerge(clsx.clsx(o))}var K=w__namespace.forwardRef((t,a)=>{var m=t,{className:o}=m,n=A(m,["className"]);return w__namespace.createElement(Q__namespace.Root,N({ref:a,className:P("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",o)},n))});K.displayName=Q__namespace.Root.displayName;var Z=reactHookForm.FormProvider,ae=w__namespace.createContext({}),ee=n=>{var o=A(n,[]);return w__namespace.createElement(ae.Provider,{value:{name:o.name}},w__namespace.createElement(reactHookForm.Controller,N({},o)))},I=()=>{let o=w__namespace.useContext(ae),n=w__namespace.useContext(ie),{getFieldState:a,formState:t}=reactHookForm.useFormContext(),m=a(o.name,t);if(!o)throw new Error("useFormField should be used within <FormField>");let{id:c}=n;return N({id:c,name:o.name,formItemId:`${c}-form-item`,formDescriptionId:`${c}-form-item-description`,formMessageId:`${c}-form-item-message`},m)},ie=w__namespace.createContext({}),U=w__namespace.forwardRef((t,a)=>{var m=t,{className:o}=m,n=A(m,["className"]);let c=w__namespace.useId();return w__namespace.createElement(ie.Provider,{value:{id:c}},w__namespace.createElement("div",N({ref:a,className:P("space-y-2",o)},n)))});U.displayName="FormItem";var H=w__namespace.forwardRef((t,a)=>{var m=t,{className:o}=m,n=A(m,["className"]);let{error:c,formItemId:e}=I();return w__namespace.createElement(K,N({ref:a,className:P(c&&"text-destructive",o),htmlFor:e},n))});H.displayName="FormLabel";var G=w__namespace.forwardRef((a,n)=>{var o=A(a,[]);let{error:t,formItemId:m,formDescriptionId:c,formMessageId:e}=I();return w__namespace.createElement(reactSlot.Slot,N({ref:n,id:m,"aria-describedby":t?`${c} ${e}`:`${c}`,"aria-invalid":!!t},o))});G.displayName="FormControl";var W=w__namespace.forwardRef((t,a)=>{var m=t,{className:o}=m,n=A(m,["className"]);let{formDescriptionId:c}=I();return w__namespace.createElement("p",N({ref:a,id:c,className:P("text-sm text-muted-foreground",o)},n))});W.displayName="FormDescription";var $=w__namespace.forwardRef((m,t)=>{var c=m,{className:o,children:n}=c,a=A(c,["className","children"]);let{error:e,formMessageId:i}=I(),r=e?String(e==null?void 0:e.message):n;return r?w__namespace.createElement("p",N({ref:t,id:i,className:P("text-sm font-medium text-destructive",o)},a),r):null});$.displayName="FormMessage";function F({form:o,onSubmit:n,children:a,className:t}){return React.createElement(Z,N({},o),React.createElement("form",{onSubmit:o.handleSubmit(n),className:P("w-full max-w-4xl mx-auto p-6 space-y-8 bg-white rounded-xl shadow-lg","border border-gray-100",t)},a))}function y({title:o,description:n,children:a,className:t}){return React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"space-y-2"},React.createElement("h3",{className:"text-xl font-semibold text-gray-900"},o),n&&React.createElement("p",{className:"text-sm text-gray-500"},n)),React.createElement("div",{className:t},a))}function p({form:o,name:n,label:a,description:t,children:m,className:c}){return React.createElement(ee,{control:o.control,name:n,render:()=>React.createElement(U,{className:c},React.createElement(H,null,a),React.createElement(G,null,m),t&&React.createElement(W,null,t),React.createElement($,null))})}function u(t){var m=t,{className:o,type:n}=m,a=A(m,["className","type"]);return w__namespace.createElement("input",N({type:n,"data-slot":"input",className:P("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",o)},a))}var Xe=classVarianceAuthority.cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function h(c){var e=c,{className:o,variant:n,size:a,asChild:t=false}=e,m=A(e,["className","variant","size","asChild"]);return w__namespace.createElement(t?reactSlot.Slot:"button",N({"data-slot":"button",className:P(Xe({variant:n,size:a,className:o}))},m))}var tr=V__namespace.object({name:V__namespace.string().min(1,"Action name is required"),points:V__namespace.number().min(0,"Points must be positive")}),sr=V__namespace.object({name:V__namespace.string().min(1,"Tier name is required"),points:V__namespace.number().min(0,"Points must be positive"),rewards:V__namespace.array(V__namespace.string()).min(1,"At least one reward is required")}),me=V__namespace.object({programName:V__namespace.string().min(1,"Program name is required"),metadataUri:V__namespace.string().url("Must be a valid URL"),organizationName:V__namespace.string().min(1,"Organization name is required"),brandColor:V__namespace.string().regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),pointsPerAction:V__namespace.array(tr).min(1,"At least one action is required"),tiers:V__namespace.array(sr).min(1,"At least one tier is required")});function de({context:o,signer:n,onSuccess:a,onError:t}){let[m,c]=w.useState(null),e=n||umi.generateSigner(o.umi),i=reactHookForm.useForm({resolver:zod.zodResolver(me),defaultValues:{programName:"",metadataUri:"",organizationName:"",brandColor:"#00adef",pointsPerAction:[{name:"",points:0}],tiers:[{name:"",points:0,rewards:[""]}]}}),r=async l=>{try{let d=me.safeParse(l);if(!d.success){console.error("Validation errors:",d.error.format()),i.setError("root",{message:"Please check all required fields are filled correctly"});return}let f={loyaltyProgramName:l.programName,metadataUri:l.metadataUri,programAuthority:o.programAuthority,updateAuthority:e,metadata:{organizationName:l.organizationName,brandColor:l.brandColor},tiers:l.tiers.map(S=>({name:S.name,xpRequired:S.points,rewards:S.rewards})),pointsPerAction:Object.fromEntries(l.pointsPerAction.map(S=>[S.name,S.points]))};console.log("programData",f);let v=await core.createLoyaltyProgram(o,f);c(v),a==null||a(v),i.reset();}catch(d){console.error(d);let f=d instanceof Error?d.message:"An error occurred while creating the loyalty program";i.setError("root",{message:f}),t==null||t(d instanceof Error?d:new Error(f));}},s=()=>{let l=i.getValues("pointsPerAction");i.setValue("pointsPerAction",[...l,{name:"",points:0}]);},g=l=>{let d=i.getValues("pointsPerAction");d.length>1&&i.setValue("pointsPerAction",d.filter((f,v)=>v!==l));},x=()=>{let l=i.getValues("tiers");i.setValue("tiers",[...l,{name:"",points:0,rewards:[""]}]);},X=l=>{let d=i.getValues("tiers");d.length>1&&i.setValue("tiers",d.filter((f,v)=>v!==l));},J=l=>{let f=[...i.getValues("tiers")];f[l]=q(N({},f[l]),{rewards:[...f[l].rewards,""]}),i.setValue("tiers",f);},b=(l,d)=>{let v=[...i.getValues("tiers")];v[l].rewards.length>1&&(v[l]=q(N({},v[l]),{rewards:v[l].rewards.filter((S,re)=>re!==d)}),i.setValue("tiers",v));};return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:i,onSubmit:r,className:"space-y-8"},React.createElement(y,{title:"Basic Information",description:"Enter the basic details of your loyalty program"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement(p,{form:i,name:"programName",label:"Program Name",description:"The name of your loyalty program"},React.createElement(u,{placeholder:"e.g., Coffee Rewards Program",onChange:l=>i.setValue("programName",l.target.value)})),React.createElement(p,{form:i,name:"organizationName",label:"Organization Name",description:"Your organization's name"},React.createElement(u,{placeholder:"e.g., Coffee Brew Co.",onChange:l=>i.setValue("organizationName",l.target.value)}))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},React.createElement("div",{className:"md:col-span-2"},React.createElement(p,{form:i,name:"metadataUri",label:"Metadata URI",description:"The URI where your program metadata is stored"},React.createElement(u,{placeholder:"https://arweave.net/...",onChange:l=>i.setValue("metadataUri",l.target.value)}))),React.createElement(p,{form:i,name:"brandColor",label:"Brand Color",description:"Your brand's primary color"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement(u,{type:"color",className:"w-14 h-14 p-1",value:i.watch("brandColor"),onChange:l=>i.setValue("brandColor",l.target.value)}),React.createElement(u,{type:"text",value:i.watch("brandColor"),onChange:l=>i.setValue("brandColor",l.target.value)}))))),React.createElement(y,{title:"Points Per Action",description:"Configure the actions that earn points and their values"},React.createElement("div",{className:"space-y-6"},i.watch("pointsPerAction").map((l,d)=>React.createElement("div",{key:d,className:"flex items-end gap-4"},React.createElement("div",{className:"flex-1"},React.createElement(p,{form:i,name:`pointsPerAction.${d}.name`,label:"Action Name",description:"Name of the action that earns points"},React.createElement(u,{placeholder:"e.g., purchase, review, referral",onChange:f=>{let v=i.getValues("pointsPerAction");v[d].name=f.target.value,i.setValue("pointsPerAction",v);}}))),React.createElement("div",{className:"flex-1"},React.createElement(p,{form:i,name:`pointsPerAction.${d}.points`,label:"Points",description:"Points awarded for this action"},React.createElement(u,{type:"number",min:0,onChange:f=>{let v=i.getValues("pointsPerAction");v[d].points=parseInt(f.target.value)||0,i.setValue("pointsPerAction",v);}}))),i.watch("pointsPerAction").length>1&&React.createElement(h,{type:"button",variant:"destructive",onClick:()=>g(d)},"Remove"))),React.createElement(h,{type:"button",variant:"outline",onClick:s},"Add Action"))),React.createElement(y,{title:"Reward Tiers",description:"Define the tiers and rewards for your loyalty program"},React.createElement("div",{className:"space-y-6"},i.watch("tiers").map((l,d)=>React.createElement("div",{key:d,className:"p-6 bg-gradient-to-br from-slate-50 to-slate-100 border border-slate-200 rounded-xl space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white font-bold text-sm"},d+1),React.createElement("h5",{className:"font-semibold"},"Tier ",d+1)),i.watch("tiers").length>1&&React.createElement(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>X(d),className:"text-red-500 hover:text-red-600 hover:bg-red-50"},"Remove Tier")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement(p,{form:i,name:`tiers.${d}.name`,label:"Tier Name",description:"Name of the loyalty tier"},React.createElement(u,{placeholder:"e.g., Bronze",onChange:f=>{let v=i.getValues("tiers");v[d].name=f.target.value,i.setValue("tiers",v);}})),React.createElement(p,{form:i,name:`tiers.${d}.points`,label:"Required Points",description:"Points needed to reach this tier"},React.createElement(u,{type:"number",min:0,onChange:f=>{let v=i.getValues("tiers");v[d].points=parseInt(f.target.value)||0,i.setValue("tiers",v);}}))),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h6",{className:"font-medium"},"Rewards"),React.createElement(h,{type:"button",variant:"outline",size:"sm",onClick:()=>J(d)},"Add Reward")),l.rewards.map((f,v)=>React.createElement("div",{key:v,className:"flex items-end gap-4"},React.createElement("div",{className:"flex-1"},React.createElement(p,{form:i,name:`tiers.${d}.rewards.${v}`,label:"",description:"Reward for this tier"},React.createElement(u,{placeholder:"e.g., 10% cashback",value:l.rewards[v],onChange:S=>{let D=[...i.getValues("tiers")];D[d]=q(N({},D[d]),{rewards:D[d].rewards.map((Ee,qe)=>qe===v?S.target.value:Ee)}),i.setValue("tiers",D);}}))),l.rewards.length>1&&React.createElement(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>b(d,v),className:"text-red-500 hover:text-red-600 hover:bg-red-50"},"Remove")))))),React.createElement(h,{type:"button",variant:"outline",onClick:x},"Add Tier"))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:i.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"},i.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Creating Program..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})),"Create Program"))),i.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},i.formState.errors.root.message))))),m&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Program Created Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.signature))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Collection Details"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Collection Public Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.collection.publicKey),m.updateAuthority&&React.createElement(React.Fragment,null,React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Update Authority Public Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.updateAuthority.publicKey)))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Next Steps"),React.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},React.createElement("p",{className:"text-blue-800"},"Your loyalty program has been created successfully! You can now:"),React.createElement("ul",{className:"mt-2 list-disc list-inside text-blue-700"},React.createElement("li",null,"Use the collection address to create loyalty passes"),React.createElement("li",null,"Update program details using the update authority"),React.createElement("li",null,"View program details using the GetProgramDetails form")))))))}var mr=V__namespace.object({name:V__namespace.string().min(1,"Action name is required"),points:V__namespace.number().min(0,"Points must be positive")}),dr=V__namespace.object({name:V__namespace.string().min(1,"Tier name is required"),points:V__namespace.number().min(0,"Points must be positive"),rewards:V__namespace.array(V__namespace.string()).min(1,"At least one reward is required")}),ce=V__namespace.object({collectionAddress:V__namespace.string().min(1,"Collection address is required"),pointsPerAction:V__namespace.array(mr).min(1,"At least one action is required"),tiers:V__namespace.array(dr).min(1,"At least one tier is required")});function pe({context:o,signer:n,onSuccess:a,onError:t}){let[m,c]=w.useState(null),e=reactHookForm.useForm({resolver:zod.zodResolver(ce),defaultValues:{collectionAddress:"",pointsPerAction:[{name:"",points:0}],tiers:[{name:"",points:0,rewards:[""]}]}}),i=async b=>{try{let l=ce.safeParse(b);if(!l.success){console.error("Validation errors:",l.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let d={collectionAddress:umi.publicKey(b.collectionAddress),programAuthority:o.programAuthority,updateAuthority:n,newTiers:b.tiers.map(v=>({name:v.name,xpRequired:v.points,rewards:v.rewards})),newPointsPerAction:Object.fromEntries(b.pointsPerAction.map(v=>[v.name,v.points]))},f=await core.updateLoyaltyProgram(o,d);c(f),a==null||a(f),e.reset({collectionAddress:"",pointsPerAction:[{name:"",points:0}],tiers:[{name:"",points:0,rewards:[""]}]});}catch(l){console.error(l);let d=l instanceof Error?l.message:"An error occurred while updating the loyalty program";e.setError("root",{message:d}),t==null||t(l instanceof Error?l:new Error(d));}},r=()=>{let b=e.getValues("pointsPerAction");e.setValue("pointsPerAction",[...b,{name:"",points:0}]);},s=b=>{let l=e.getValues("pointsPerAction");l.length>1&&e.setValue("pointsPerAction",l.filter((d,f)=>f!==b));},g=()=>{let b=e.getValues("tiers");e.setValue("tiers",[...b,{name:"",points:0,rewards:[""]}]);},x=b=>{let l=e.getValues("tiers");l.length>1&&e.setValue("tiers",l.filter((d,f)=>f!==b));},X=b=>{let l=e.getValues("tiers");l[b].rewards.push(""),e.setValue("tiers",l);},J=(b,l)=>{let d=e.getValues("tiers");d[b].rewards.length>1&&(d[b].rewards=d[b].rewards.filter((f,v)=>v!==l),e.setValue("tiers",d));};return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:e,onSubmit:i,className:"space-y-8"},React.createElement(y,{title:"Program Information",description:"Specify the program to update"},React.createElement(p,{form:e,name:"collectionAddress",label:"Collection Address",description:"The unique address of your loyalty program collection"},React.createElement(u,{placeholder:"Enter the collection address",onChange:b=>e.setValue("collectionAddress",b.target.value)}))),React.createElement(y,{title:"Points Configuration",description:"Update points awarded for different actions"},React.createElement("div",{className:"space-y-6"},e.watch("pointsPerAction").map((b,l)=>React.createElement("div",{key:l,className:"flex items-end gap-4"},React.createElement("div",{className:"flex-1"},React.createElement(p,{form:e,name:`pointsPerAction.${l}.name`,label:"Action Name",description:"Name of the action that earns points"},React.createElement(u,{placeholder:"e.g., purchase, review, referral",onChange:d=>{let f=e.getValues("pointsPerAction");f[l].name=d.target.value,e.setValue("pointsPerAction",f);}}))),React.createElement("div",{className:"flex-1"},React.createElement(p,{form:e,name:`pointsPerAction.${l}.points`,label:"Points",description:"Points awarded for this action"},React.createElement(u,{type:"number",min:0,placeholder:"100",onChange:d=>{let f=e.getValues("pointsPerAction");f[l].points=parseInt(d.target.value)||0,e.setValue("pointsPerAction",f);}}))),e.watch("pointsPerAction").length>1&&React.createElement(h,{type:"button",variant:"destructive",onClick:()=>s(l)},"Remove"))),React.createElement(h,{type:"button",variant:"outline",onClick:r},"Add Action"))),React.createElement(y,{title:"Tier Configuration",description:"Configure loyalty program tiers and rewards"},React.createElement("div",{className:"space-y-6"},e.watch("tiers").map((b,l)=>React.createElement("div",{key:l,className:"p-6 bg-gradient-to-br from-slate-50 to-slate-100 border border-slate-200 rounded-xl space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white font-bold text-sm"},l+1),React.createElement("h5",{className:"font-semibold"},"Tier ",l+1)),e.watch("tiers").length>1&&React.createElement(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(l),className:"text-red-500 hover:text-red-600 hover:bg-red-50"},"Remove Tier")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement(p,{form:e,name:`tiers.${l}.name`,label:"Tier Name",description:"Name of the loyalty tier"},React.createElement(u,{placeholder:"e.g., Bronze",onChange:d=>{let f=e.getValues("tiers");f[l].name=d.target.value,e.setValue("tiers",f);}})),React.createElement(p,{form:e,name:`tiers.${l}.points`,label:"Required Points",description:"Points needed to reach this tier"},React.createElement(u,{type:"number",min:0,placeholder:"500",onChange:d=>{let f=e.getValues("tiers");f[l].points=parseInt(d.target.value)||0,e.setValue("tiers",f);}}))),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h6",{className:"font-medium"},"Rewards"),React.createElement(h,{type:"button",variant:"outline",size:"sm",onClick:()=>X(l)},"Add Reward")),b.rewards.map((d,f)=>React.createElement("div",{key:f,className:"flex items-end gap-4"},React.createElement("div",{className:"flex-1"},React.createElement(p,{form:e,name:`tiers.${l}.rewards.${f}`,label:"",description:"Reward for this tier"},React.createElement(u,{placeholder:"e.g., 10% cashback",onChange:v=>{let S=e.getValues("tiers");S[l].rewards[f]=v.target.value,e.setValue("tiers",S);}}))),b.rewards.length>1&&React.createElement(h,{type:"button",variant:"ghost",size:"sm",onClick:()=>J(l,f),className:"text-red-500 hover:text-red-600 hover:bg-red-50"},"Remove")))))),React.createElement(h,{type:"button",variant:"outline",onClick:g},"Add Tier"))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Updating Program..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})),"Update Program"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),m&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Loyalty Program Updated Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.signature)))))}var ge=V__namespace.object({collectionAddress:V__namespace.string().min(1,"Collection address is required"),recipientAddress:V__namespace.string().min(1,"Recipient address is required"),passName:V__namespace.string().min(1,"Pass name is required"),passMetadataUri:V__namespace.string().url("Must be a valid URL")});function fe({context:o,signer:n,onSuccess:a,onError:t}){let[m,c]=w.useState(null),e=reactHookForm.useForm({resolver:zod.zodResolver(ge),defaultValues:{collectionAddress:"",recipientAddress:"",passName:"",passMetadataUri:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:e,onSubmit:async r=>{try{let s=ge.safeParse(r);if(!s.success){console.error("Validation errors:",s.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let g={collectionAddress:umi.publicKey(r.collectionAddress),recipient:umi.publicKey(r.recipientAddress),passName:r.passName,passMetadataUri:r.passMetadataUri,assetSigner:umi.generateSigner(o.umi),updateAuthority:n},x=await core.issueLoyaltyPass(o,g);c(x),a==null||a(x),e.reset();}catch(s){console.error(s);let g=s instanceof Error?s.message:"An error occurred while issuing the loyalty pass";e.setError("root",{message:g}),t==null||t(s instanceof Error?s:new Error(g));}},className:"space-y-8"},React.createElement(y,{title:"Program Information",description:"Specify the loyalty program collection"},React.createElement(p,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(u,{placeholder:"Enter the collection address",onChange:r=>e.setValue("collectionAddress",r.target.value)}))),React.createElement(y,{title:"Pass Details",description:"Configure the new loyalty pass details"},React.createElement("div",{className:"space-y-6"},React.createElement(p,{form:e,name:"recipientAddress",label:"Recipient Address",description:"The wallet address that will receive the loyalty pass"},React.createElement(u,{placeholder:"Enter the wallet address of the recipient",onChange:r=>e.setValue("recipientAddress",r.target.value)})),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement(p,{form:e,name:"passName",label:"Pass Name",description:"Name of the loyalty pass"},React.createElement(u,{placeholder:"e.g., Coffee Rewards Pass",onChange:r=>e.setValue("passName",r.target.value)})),React.createElement(p,{form:e,name:"passMetadataUri",label:"Metadata URI",description:"URI containing the pass metadata"},React.createElement(u,{placeholder:"https://arweave.net/...",onChange:r=>e.setValue("passMetadataUri",r.target.value)}))))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-violet-500 to-purple-500 hover:from-violet-600 hover:to-purple-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Issuing Pass..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})),"Issue Pass"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),m&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Pass Issued Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.signature))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Pass Details"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Pass Public Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.asset.publicKey))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Next Steps"),React.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},React.createElement("p",{className:"text-blue-800"},"Your loyalty pass has been issued successfully! You can now:"),React.createElement("ul",{className:"mt-2 list-disc list-inside text-blue-700"},React.createElement("li",null,"View pass details using the GetAssetData"),React.createElement("li",null,"Transfer the pass to another wallet if needed")))))))}var ye=V__namespace.object({passAddress:V__namespace.string().min(1,"Pass address is required"),newOwner:V__namespace.string().min(1,"New owner address is required")});function he({context:o,signer:n,onSuccess:a,onError:t}){let[m,c]=w.useState(false),e=reactHookForm.useForm({resolver:zod.zodResolver(ye),defaultValues:{passAddress:"",newOwner:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:e,onSubmit:async r=>{try{let s=ye.safeParse(r);if(!s.success){console.error("Validation errors:",s.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}await core.approveTransfer(o,umi.publicKey(r.passAddress),umi.publicKey(r.newOwner)),c(!0),a==null||a(),e.reset();}catch(s){console.error(s);let g=s instanceof Error?s.message:"An error occurred while approving the transfer";e.setError("root",{message:g}),t==null||t(s instanceof Error?s:new Error(g));}},className:"space-y-8"},React.createElement(y,{title:"Transfer Information",description:"Enter the details of the loyalty pass transfer"},React.createElement("div",{className:"space-y-6"},React.createElement(p,{form:e,name:"passAddress",label:"Pass Address",description:"The unique address of the loyalty pass being transferred"},React.createElement(u,{placeholder:"Enter the loyalty pass address to transfer",onChange:r=>e.setValue("passAddress",r.target.value)})),React.createElement(p,{form:e,name:"newOwner",label:"New Owner Address",description:"The wallet address that will receive the loyalty pass"},React.createElement(u,{placeholder:"Enter the new owner's wallet address",onChange:r=>e.setValue("newOwner",r.target.value)})))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Approving Transfer..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),"Approve Transfer"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),m&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Transfer Approved Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed"))))}var be=V__namespace.object({collectionAddress:V__namespace.string().min(1,"Collection address is required"),passAddress:V__namespace.string().min(1,"Pass address is required"),message:V__namespace.string().min(1,"Message content is required").max(500,"Message content must be less than 500 characters")});function Ne({context:o,signer:n,onSuccess:a,onError:t}){let[m,c]=w.useState(null),e=reactHookForm.useForm({resolver:zod.zodResolver(be),defaultValues:{collectionAddress:"",passAddress:"",message:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:e,onSubmit:async r=>{try{let s=be.safeParse(r);if(!s.success){console.error("Validation errors:",s.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}o.collectionAddress=umi.publicKey(r.collectionAddress);let g={passAddress:umi.publicKey(r.passAddress),message:r.message,sender:o.programAuthority,signer:n},x=await core.sendMessage(o,g);c(x),a==null||a(x),e.reset({collectionAddress:"",passAddress:"",message:""});}catch(s){console.error(s);let g=s instanceof Error?s.message:"An error occurred while sending the message";e.setError("root",{message:g}),t==null||t(s instanceof Error?s:new Error(g));}},className:"space-y-8"},React.createElement(y,{title:"Program Information",description:"Specify the program and pass for the message"},React.createElement("div",{className:"space-y-6"},React.createElement(p,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(u,{placeholder:"Enter the collection address",onChange:r=>e.setValue("collectionAddress",r.target.value)})),React.createElement(p,{form:e,name:"passAddress",label:"Pass Address",description:"The address of the loyalty pass"},React.createElement(u,{placeholder:"Enter the loyalty pass address",onChange:r=>e.setValue("passAddress",r.target.value)})))),React.createElement(y,{title:"Message Details",description:"Compose your message to the pass holder"},React.createElement("div",{className:"space-y-6"},React.createElement(p,{form:e,name:"message",label:"Message Content",description:"Maximum 500 characters. Be clear and engaging."},React.createElement("textarea",{className:"flex min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter your message content here...",value:e.watch("message"),onChange:r=>e.setValue("message",r.target.value),rows:6,maxLength:500})))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Sending Message..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})),"Send Message"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),m&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Message Sent Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.signature)))))}var Fe=V__namespace.object({collectionAddress:V__namespace.string().min(1,"Collection address is required"),passAddress:V__namespace.string().min(1,"Pass address is required"),pointsToRevoke:V__namespace.number().min(1,"Points must be at least 1")});function Ve({context:o,signer:n,onSuccess:a,onError:t}){let[m,c]=w.useState(null),e=reactHookForm.useForm({resolver:zod.zodResolver(Fe),defaultValues:{collectionAddress:"",passAddress:"",pointsToRevoke:0}});return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:e,onSubmit:async r=>{try{let s=Fe.safeParse(r);if(!s.success){console.error("Validation errors:",s.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}o.collectionAddress=umi.publicKey(r.collectionAddress);let g={passAddress:umi.publicKey(r.passAddress),pointsToRevoke:r.pointsToRevoke,signer:n},x=await core.revokeLoyaltyPoints(o,g);c(x),a==null||a(x),e.reset({collectionAddress:"",passAddress:"",pointsToRevoke:0});}catch(s){console.error(s);let g=s instanceof Error?s.message:"An error occurred while revoking points";e.setError("root",{message:g}),t==null||t(s instanceof Error?s:new Error(g));}},className:"space-y-8"},React.createElement(y,{title:"Program Information",description:"Specify the loyalty program collection"},React.createElement(p,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(u,{placeholder:"Enter the collection address",onChange:r=>e.setValue("collectionAddress",r.target.value)}))),React.createElement(y,{title:"Pass Information",description:"Specify the loyalty pass to revoke points from"},React.createElement(p,{form:e,name:"passAddress",label:"Pass Address",description:"The unique address of the loyalty pass"},React.createElement(u,{placeholder:"Enter the loyalty pass address",onChange:r=>e.setValue("passAddress",r.target.value)}))),React.createElement(y,{title:"Revocation Details",description:"Configure the amount of points to revoke"},React.createElement(p,{form:e,name:"pointsToRevoke",label:"Points to Revoke",description:"Number of points to remove from the user"},React.createElement(u,{type:"number",min:1,placeholder:"Enter number of points",onChange:r=>e.setValue("pointsToRevoke",parseInt(r.target.value)||0)}))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Revoking Points..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})),"Revoke Points"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),m&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Points Revoked Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.signature))))))}var Pe=V__namespace.object({collectionAddress:V__namespace.string().min(1,"Collection address is required"),passAddress:V__namespace.string().min(1,"Pass address is required"),pointsToGift:V__namespace.number().min(1,"Points must be at least 1"),action:V__namespace.string().min(1,"Action name is required")});function Ce({context:o,signer:n,onSuccess:a,onError:t}){let[m,c]=w.useState(null),e=reactHookForm.useForm({resolver:zod.zodResolver(Pe),defaultValues:{collectionAddress:"",passAddress:"",pointsToGift:0,action:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:e,onSubmit:async r=>{try{let s=Pe.safeParse(r);if(!s.success){console.error("Validation errors:",s.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}o.collectionAddress=umi.publicKey(r.collectionAddress);let g={passAddress:umi.publicKey(r.passAddress),pointsToGift:r.pointsToGift,signer:n,action:r.action},x=await core.giftLoyaltyPoints(o,g);console.log("result",x),c(x),a==null||a(x),e.reset({collectionAddress:"",passAddress:"",pointsToGift:0,action:""});}catch(s){console.error(s);let g=s instanceof Error?s.message:"An error occurred while gifting points";e.setError("root",{message:g}),t==null||t(s instanceof Error?s:new Error(g));}},className:"space-y-8"},React.createElement(y,{title:"Program Information",description:"Specify the loyalty program collection"},React.createElement(p,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(u,{placeholder:"Enter the collection address",onChange:r=>e.setValue("collectionAddress",r.target.value)}))),React.createElement(y,{title:"Pass Information",description:"Specify the loyalty pass to gift points to"},React.createElement(p,{form:e,name:"passAddress",label:"Pass Address",description:"The unique address of the loyalty pass"},React.createElement(u,{placeholder:"Enter the loyalty pass address",onChange:r=>e.setValue("passAddress",r.target.value)}))),React.createElement(y,{title:"Gift Details",description:"Configure the gift amount and action"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement(p,{form:e,name:"pointsToGift",label:"Points to Gift",description:"Number of points to gift"},React.createElement(u,{type:"number",min:1,placeholder:"Enter number of points",onChange:r=>e.setValue("pointsToGift",parseInt(r.target.value)||0)})),React.createElement(p,{form:e,name:"action",label:"Action Name",description:"Custom action name for the gift (e.g., birthday_bonus)"},React.createElement(u,{placeholder:"e.g., birthday_bonus",onChange:r=>e.setValue("action",r.target.value)})))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Gifting Points..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})),"Gift Points"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),m&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Points Gifted Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.signature))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Points Details"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"New Total Points:")," ",m.points),m.newTier&&React.createElement(React.Fragment,null,React.createElement("p",null,React.createElement("span",{className:"font-medium"},"New Tier:")," ",m.newTier.name),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Tier XP Required:")," ",m.newTier.xpRequired),React.createElement("div",{className:"mt-2"},React.createElement("p",{className:"font-medium"},"Tier Rewards:"),React.createElement("ul",{className:"list-disc list-inside text-sm text-gray-600"},m.newTier.rewards.map((r,s)=>React.createElement("li",{key:s},r))))))))))}var Se=V__namespace.object({passAddress:V__namespace.string().min(1,"Pass address is required")});function Re({context:o,onSuccess:n,onError:a}){var i,r;let[t,m]=w.useState(null),c=reactHookForm.useForm({resolver:zod.zodResolver(Se),defaultValues:{passAddress:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:c,onSubmit:async s=>{try{let g=Se.safeParse(s);if(!g.success){console.error("Validation errors:",g.error.format()),c.setError("root",{message:"Please check all required fields are filled correctly"});return}let x=await core.getAssetData(o,umi.publicKey(s.passAddress));m(x),x&&(n==null||n(x)),c.reset();}catch(g){console.error(g);let x=g instanceof Error?g.message:"An error occurred while fetching asset data";c.setError("root",{message:x}),a==null||a(g instanceof Error?g:new Error(x));}},className:"space-y-8"},React.createElement(y,{title:"Pass Information",description:"Enter the loyalty pass address to fetch details"},React.createElement(p,{form:c,name:"passAddress",label:"Pass Address",description:"The unique address of the loyalty pass"},React.createElement(u,{placeholder:"Enter the loyalty pass address",onChange:s=>c.setValue("passAddress",s.target.value)}))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:c.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600"},c.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Fetching Data..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})),"Get Data"))),c.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},c.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("h2",{className:"text-2xl font-bold mb-6 text-gray-900"},t.name),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Basic Information"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Organization:")," ",t.metadata.organizationName),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Current XP:")," ",t.xp),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Current Tier:")," ",t.currentTier),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Brand Color:"),React.createElement("span",{className:"inline-block w-4 h-4 ml-2 rounded-full",style:{backgroundColor:t.metadata.brandColor}})))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Owner Information"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Owner Address:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.owner),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Pass Address:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.pass))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Available Tiers"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},t.rewardTiers.map(s=>React.createElement("div",{key:s.name,className:"p-4 bg-gray-50 rounded-lg"},React.createElement("h4",{className:"font-medium text-lg mb-2"},s.name),React.createElement("p",{className:"text-gray-600 mb-2"},"Required XP: ",s.xpRequired),React.createElement("div",{className:"space-y-1"},React.createElement("p",{className:"font-medium text-sm text-gray-700"},"Rewards:"),React.createElement("ul",{className:"list-disc list-inside text-sm text-gray-600"},s.rewards.map((g,x)=>React.createElement("li",{key:x},g)))))))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Action History"),t.actionHistory.length>0?React.createElement("div",{className:"space-y-2"},t.actionHistory.map((s,g)=>React.createElement("div",{key:g,className:"p-3 bg-gray-50 rounded-lg"},React.createElement("p",{className:"text-sm text-gray-600"},s)))):React.createElement("p",{className:"text-gray-500 italic"},"No actions recorded yet")),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Last Action"),React.createElement("p",{className:"text-gray-600"},t.lastAction?React.createElement("span",null,t.lastAction):React.createElement("span",{className:"italic"},"No actions performed yet"))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Broadcasts"),React.createElement("div",{className:"space-y-4"},t.broadcasts.broadcasts.map(s=>React.createElement("div",{key:s.id,className:"p-4 bg-gray-50 rounded-lg"},React.createElement("div",{className:"flex items-start justify-between"},React.createElement("div",{className:"space-y-2"},React.createElement("p",{className:"text-gray-900"},s.content),React.createElement("p",{className:"text-sm text-gray-500"},"From: ",s.sender),React.createElement("p",{className:"text-sm text-gray-500"},new Date(s.timestamp).toLocaleString())),!s.read&&React.createElement("span",{className:"px-2 py-1 text-xs font-medium text-blue-800 bg-blue-100 rounded-full"},"New")))),t.broadcasts.broadcasts.length===0&&React.createElement("p",{className:"text-gray-500 text-center py-4"},"No broadcasts yet"))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Message History"),React.createElement("div",{className:"space-y-4"},(i=t.messageHistory)==null?void 0:i.map(s=>React.createElement("div",{key:s.id,className:"p-4 bg-gray-50 rounded-lg"},React.createElement("div",{className:"flex items-start justify-between"},React.createElement("div",{className:"space-y-2"},React.createElement("p",{className:"text-gray-900"},s.content),React.createElement("p",{className:"text-sm text-gray-500"},"From: ",s.sender),React.createElement("p",{className:"text-sm text-gray-500"},new Date(s.timestamp).toLocaleString())),!s.read&&React.createElement("span",{className:"px-2 py-1 text-xs font-medium text-blue-800 bg-blue-100 rounded-full"},"New")))),((r=t.messageHistory)==null?void 0:r.length)===0&&React.createElement("p",{className:"text-gray-500 text-center py-4"},"No messages yet"))))))}var ke=V__namespace.object({collectionAddress:V__namespace.string().min(1,"Collection address is required")});function ze({context:o,onSuccess:n,onError:a}){let[t,m]=w.useState(null),c=reactHookForm.useForm({resolver:zod.zodResolver(ke),defaultValues:{collectionAddress:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:c,onSubmit:async i=>{try{let r=ke.safeParse(i);if(!r.success){console.error("Validation errors:",r.error.format()),c.setError("root",{message:"Please check all required fields are filled correctly"});return}o.collectionAddress=umi.publicKey(i.collectionAddress);let s=await core.getProgramDetails(o);m(s),n==null||n(s),c.reset();}catch(r){console.error(r);let s=r instanceof Error?r.message:"An error occurred while fetching program details";c.setError("root",{message:s}),a==null||a(r instanceof Error?r:new Error(s));}},className:"space-y-8"},React.createElement(y,{title:"Program Information",description:"Enter the collection address to fetch program details"},React.createElement(p,{form:c,name:"collectionAddress",label:"Collection Address",description:"The unique address of the loyalty program collection"},React.createElement(u,{placeholder:"Enter the collection address",onChange:i=>c.setValue("collectionAddress",i.target.value)}))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:c.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600"},c.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Fetching Details..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),"Get Details"))),c.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},c.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("h2",{className:"text-2xl font-bold mb-6 text-gray-900"},t.name),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Basic Information"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Organization:")," ",t.metadata.organizationName),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Total Minted:")," ",t.numMinted),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Brand Color:"),React.createElement("span",{className:"inline-block w-4 h-4 ml-2 rounded-full",style:{backgroundColor:t.metadata.brandColor}})))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Points Per Action"),React.createElement("div",{className:"space-y-2"},Object.entries(t.pointsPerAction).map(([i,r])=>React.createElement("p",{key:i},React.createElement("span",{className:"font-medium capitalize"},i,":")," ",r," points")))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Loyalty Tiers"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},t.tiers.map(i=>React.createElement("div",{key:i.name,className:"p-4 bg-gray-50 rounded-lg"},React.createElement("h4",{className:"font-medium text-lg mb-2"},i.name),React.createElement("p",{className:"text-gray-600 mb-2"},"Required XP: ",i.xpRequired),React.createElement("div",{className:"space-y-1"},React.createElement("p",{className:"font-medium text-sm text-gray-700"},"Rewards:"),React.createElement("ul",{className:"list-disc list-inside text-sm text-gray-600"},i.rewards.map((r,s)=>React.createElement("li",{key:s},r)))))))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Authority Information"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("p",{className:"text-sm text-gray-600"},"Update Authority"),React.createElement("p",{className:"font-mono text-sm"},t.updateAuthority)),React.createElement("div",null,React.createElement("p",{className:"text-sm text-gray-600"},"Transfer Authority"),React.createElement("p",{className:"font-mono text-sm"},t.transferAuthority)))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Broadcasts"),React.createElement("div",{className:"space-y-4"},t.broadcasts.broadcasts.map(i=>React.createElement("div",{key:i.id,className:"p-4 bg-gray-50 rounded-lg"},React.createElement("div",{className:"flex items-start justify-between"},React.createElement("div",{className:"space-y-2"},React.createElement("p",{className:"text-gray-900"},i.content),React.createElement("p",{className:"text-sm text-gray-500"},"From: ",i.sender),React.createElement("p",{className:"text-sm text-gray-500"},new Date(i.timestamp).toLocaleString())),!i.read&&React.createElement("span",{className:"px-2 py-1 text-xs font-medium text-blue-800 bg-blue-100 rounded-full"},"New")))),t.broadcasts.broadcasts.length===0&&React.createElement("p",{className:"text-gray-500 text-center py-4"},"No broadcasts yet"))))))}var Te=V__namespace.object({collectionAddress:V__namespace.string().min(1,"Collection address is required"),passAddress:V__namespace.string().min(1,"Pass address is required"),action:V__namespace.string().min(1,"Action is required"),multiplier:V__namespace.number().min(1).max(10).optional()});function Me({context:o,signer:n,onSuccess:a,onError:t}){let[m,c]=w.useState(null),e=reactHookForm.useForm({resolver:zod.zodResolver(Te),defaultValues:{collectionAddress:"",passAddress:"",action:"purchase",multiplier:1}});return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:e,onSubmit:async r=>{try{let s=Te.safeParse(r);if(!s.success){console.error("Validation errors:",s.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}o.collectionAddress=umi.publicKey(r.collectionAddress);let g={passAddress:umi.publicKey(r.passAddress),action:r.action,signer:n,multiplier:r.multiplier},x=await core.awardLoyaltyPoints(o,g);c(x),a==null||a(x),e.reset({collectionAddress:"",passAddress:"",action:"purchase",multiplier:1});}catch(s){console.error(s);let g=s instanceof Error?s.message:"An error occurred while awarding points";e.setError("root",{message:g}),t==null||t(s instanceof Error?s:new Error(g));}},className:"space-y-8"},React.createElement(y,{title:"Program Information",description:"Specify the loyalty program collection"},React.createElement(p,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(u,{placeholder:"Enter the collection address",onChange:r=>e.setValue("collectionAddress",r.target.value)}))),React.createElement(y,{title:"Pass Information",description:"Specify the loyalty pass to award points to"},React.createElement(p,{form:e,name:"passAddress",label:"Pass Address",description:"The unique address of the loyalty pass"},React.createElement(u,{placeholder:"Enter the loyalty pass address",onChange:r=>e.setValue("passAddress",r.target.value)}))),React.createElement(y,{title:"Action Details",description:"Configure the action and points multiplier"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement(p,{form:e,name:"action",label:"Action Type",description:"Enter the action that triggers the reward"},React.createElement(u,{placeholder:"e.g., purchase, review, referral",onChange:r=>e.setValue("action",r.target.value)})),React.createElement(p,{form:e,name:"multiplier",label:"Points Multiplier",description:"Multiply the base points by this factor (1-10)"},React.createElement(u,{type:"number",min:1,max:10,placeholder:"1",onChange:r=>e.setValue("multiplier",parseInt(r.target.value)||1)})))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Awarding Points..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})),"Award Points"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),m&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Points Awarded Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.signature))))))}var Be=V__namespace.object({collectionAddress:V__namespace.string().min(1,"Collection address is required"),message:V__namespace.string().min(1,"Message is required").max(500,"Message must be less than 500 characters")});function De({context:o,signer:n,onSuccess:a,onError:t}){let[m,c]=w.useState(null),e=reactHookForm.useForm({resolver:zod.zodResolver(Be),defaultValues:{collectionAddress:"",message:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(F,{form:e,onSubmit:async r=>{try{let s=Be.safeParse(r);if(!s.success){console.error("Validation errors:",s.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let g={collectionAddress:umi.publicKey(r.collectionAddress),message:r.message,sender:o.programAuthority,signer:n},x=await core.sendBroadcast(o,g);c(x),a==null||a(x),e.reset({collectionAddress:"",message:""});}catch(s){console.error(s);let g=s instanceof Error?s.message:"An error occurred while sending the broadcast";e.setError("root",{message:g}),t==null||t(s instanceof Error?s:new Error(g));}},className:"space-y-8"},React.createElement(y,{title:"Program Information",description:"Specify the program for the broadcast"},React.createElement(p,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(u,{placeholder:"Enter the collection address",onChange:r=>e.setValue("collectionAddress",r.target.value)}))),React.createElement(y,{title:"Broadcast Message",description:"Compose your message to all pass holders"},React.createElement(p,{form:e,name:"message",label:"Message Content",description:"The message to broadcast to all pass holders (max 500 characters)"},React.createElement("textarea",{className:"flex min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter your broadcast message...",value:e.watch("message"),onChange:r=>e.setValue("message",r.target.value),maxLength:500}))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(h,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-sky-500 to-blue-500 hover:from-sky-600 hover:to-blue-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Sending Broadcast..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})),"Send Broadcast"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),m&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Broadcast Sent Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},m.signature)))))}var Qr=classVarianceAuthority.cva("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90",warning:"text-yellow-500 bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-yellow-500/90 border-yellow-500 dark:bg-yellow-900/10"}},defaultVariants:{variant:"default"}});function Zr(t){var m=t,{className:o,variant:n}=m,a=A(m,["className","variant"]);return w__namespace.createElement("div",N({"data-slot":"alert",role:"alert",className:P(Qr({variant:n}),o)},a))}function et(a){var t=a,{className:o}=t,n=A(t,["className"]);return w__namespace.createElement("div",N({"data-slot":"alert-title",className:P("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",o)},n))}function rt(a){var t=a,{className:o}=t,n=A(t,["className"]);return w__namespace.createElement("div",N({"data-slot":"alert-description",className:P("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",o)},n))}
exports.Alert=Zr;exports.AlertDescription=rt;exports.AlertTitle=et;exports.ApproveTransferForm=he;exports.AwardLoyaltyPointsForm=Me;exports.BroadcastsForm=De;exports.Button=h;exports.CreateLoyaltyProgramForm=de;exports.Form=Z;exports.FormControl=G;exports.FormDescription=W;exports.FormField=ee;exports.FormItem=U;exports.FormLabel=H;exports.FormMessage=$;exports.GetAssetDataForm=Re;exports.GetProgramDetailsForm=ze;exports.GiftLoyaltyPointsForm=Ce;exports.Input=u;exports.IssueLoyaltyPassForm=fe;exports.Label=K;exports.MessagingForm=Ne;exports.RevokeLoyaltyPointsForm=Ve;exports.UpdateLoyaltyProgramForm=pe;exports.VerxioForm=F;exports.VerxioFormField=p;exports.VerxioFormSection=y;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map