import {useFormContext,FormProvider,Controller,useForm}from'react-hook-form';import {zodResolver}from'@hookform/resolvers/zod';import*as I from'zod';import {z as z$1}from'zod';import*as z from'react';import {useState}from'react';import {Slot}from'@radix-ui/react-slot';import {clsx}from'clsx';import {twMerge}from'tailwind-merge';import'bs58';import'@metaplex-foundation/umi-web3js-adapters';import'@solana/web3.js';import*as Ge from'@radix-ui/react-label';import {cva}from'class-variance-authority';import*as ie from'@radix-ui/react-tabs';import {ChevronDown,ChevronUp,Check,Link,Upload,CheckCircle,Info,XCircle,AlertTriangle,Clock,Calendar}from'lucide-react';import*as R from'@radix-ui/react-select';var or=Object.defineProperty,ir=Object.defineProperties;var nr=Object.getOwnPropertyDescriptors;var Pe=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var it=(r,s,t)=>s in r?or(r,s,{enumerable:true,configurable:true,writable:true,value:t}):r[s]=t,c=(r,s)=>{for(var t in s||(s={}))nt.call(s,t)&&it(r,t,s[t]);if(Pe)for(var t of Pe(s))lt.call(s,t)&&it(r,t,s[t]);return r},T=(r,s)=>ir(r,nr(s));var C=(r,s)=>{var t={};for(var i in r)nt.call(r,i)&&s.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&Pe)for(var i of Pe(r))s.indexOf(i)<0&&lt.call(r,i)&&(t[i]=r[i]);return t};function V(...r){return twMerge(clsx(r))}var me=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement(Ge.Root,c({ref:t,className:V("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r)},s))});me.displayName=Ge.Root.displayName;var We=FormProvider,mt=z.createContext({}),$e=s=>{var r=C(s,[]);return z.createElement(mt.Provider,{value:{name:r.name}},z.createElement(Controller,c({},r)))},Te=()=>{let r=z.useContext(mt),s=z.useContext(dt),{getFieldState:t,formState:i}=useFormContext(),e=t(r.name,i);if(!r)throw new Error("useFormField should be used within <FormField>");let{id:v}=s;return c({id:v,name:r.name,formItemId:`${v}-form-item`,formDescriptionId:`${v}-form-item-description`,formMessageId:`${v}-form-item-message`},e)},dt=z.createContext({}),De=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);let v=z.useId();return z.createElement(dt.Provider,{value:{id:v}},z.createElement("div",c({ref:t,className:V("space-y-2",r)},s)))});De.displayName="FormItem";var ke=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);let{error:v,formItemId:o}=Te();return z.createElement(me,c({ref:t,className:V(v&&"text-destructive",r),htmlFor:o},s))});ke.displayName="FormLabel";var ze=z.forwardRef((t,s)=>{var r=C(t,[]);let{error:i,formItemId:e,formDescriptionId:v,formMessageId:o}=Te();return z.createElement(Slot,c({ref:s,id:e,"aria-describedby":i?`${v} ${o}`:`${v}`,"aria-invalid":!!i},r))});ze.displayName="FormControl";var Le=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);let{formDescriptionId:v}=Te();return z.createElement("p",c({ref:t,id:v,className:V("text-sm text-muted-foreground",r)},s))});Le.displayName="FormDescription";var Me=z.forwardRef((e,i)=>{var v=e,{className:r,children:s}=v,t=C(v,["className","children"]);let{error:o,formMessageId:l}=Te(),a=o?String(o==null?void 0:o.message):s;return a?z.createElement("p",c({ref:i,id:l,className:V("text-sm font-medium text-destructive",r)},t),a):null});Me.displayName="FormMessage";function P({form:r,onSubmit:s,children:t,className:i}){return React.createElement(We,c({},r),React.createElement("form",{onSubmit:r.handleSubmit(s),className:V("w-full max-w-4xl mx-auto p-6 space-y-8 bg-white rounded-xl shadow-lg","border border-gray-100",i)},t))}function M({title:r,children:s,className:t}){return React.createElement("div",{className:V("space-y-4",t)},React.createElement("h3",{className:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},r),React.createElement("div",{className:"space-y-4"},s))}function D({label:r,children:s,error:t,className:i}){return React.createElement("div",{className:V("space-y-2",i)},React.createElement("label",{className:"text-sm font-medium text-gray-700"},r),s,t&&React.createElement("p",{className:"text-sm text-red-600"},t))}function A({title:r,description:s,children:t,className:i}){return React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"space-y-2"},React.createElement("h3",{className:"text-xl font-semibold text-gray-900"},r),s&&React.createElement("p",{className:"text-sm text-gray-500"},s)),React.createElement("div",{className:i},t))}function b({form:r,name:s,label:t,description:i,children:e,className:v}){return React.createElement($e,{control:r.control,name:s,render:()=>React.createElement(De,{className:v},React.createElement(ke,null,t),React.createElement(ze,null,e),i&&React.createElement(Le,null,i),React.createElement(Me,null))})}function d(i){var e=i,{className:r,type:s}=e,t=C(e,["className","type"]);return z.createElement("input",c({type:s,"data-slot":"input",className:V("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r)},t))}var vr=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function N(v){var o=v,{className:r,variant:s,size:t,asChild:i=false}=o,e=C(o,["className","variant","size","asChild"]);return z.createElement(i?Slot:"button",c({"data-slot":"button",className:V(vr({variant:s,size:t,className:r}))},e))}var ge=ie.Root,de=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement(ie.List,c({ref:t,className:V("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r)},s))});de.displayName=ie.List.displayName;var te=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement(ie.Trigger,c({ref:t,className:V("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r)},s))});te.displayName=ie.Trigger.displayName;var re=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement(ie.Content,c({ref:t,className:V("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r)},s))});re.displayName=ie.Content.displayName;var yr=cva("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90",warning:"text-yellow-500 bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-yellow-500/90 border-yellow-500 dark:bg-yellow-900/10"}},defaultVariants:{variant:"default"}});function _(i){var e=i,{className:r,variant:s}=e,t=C(e,["className","variant"]);return z.createElement("div",c({"data-slot":"alert",role:"alert",className:V(yr({variant:s}),r)},t))}function xr(t){var i=t,{className:r}=i,s=C(i,["className"]);return z.createElement("div",c({"data-slot":"alert-title",className:V("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",r)},s))}function G(t){var i=t,{className:r}=i,s=C(i,["className"]);return z.createElement("div",c({"data-slot":"alert-description",className:V("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r)},s))}var Vr=I.object({name:I.string().min(1,"Action name is required"),points:I.number().min(0,"Points must be positive")}),Cr=I.object({name:I.string().min(1,"Tier name is required"),points:I.number().min(0,"Points must be positive"),rewards:I.array(I.string()).min(1,"At least one reward is required")}),ut=I.object({programName:I.string().min(1,"Program name is required"),metadataUri:I.string().optional(),imageBuffer:I.any().optional(),imageFilename:I.string().optional(),imageContentType:I.string().optional(),organizationName:I.string().min(1,"Organization name is required"),brandColor:I.string().regex(/^#[0-9A-Fa-f]{6}$/,"Must be a valid hex color"),pointsPerAction:I.array(Vr).min(1,"At least one action is required"),tiers:I.array(Cr).min(1,"At least one tier is required")});function ft({onSuccess:r,onError:s}){let[t,i]=useState(null),[e,v]=useState("uri"),[o,l]=useState(null),a=useForm({resolver:zodResolver(ut),defaultValues:{programName:"",metadataUri:"",organizationName:"",brandColor:"#00adef",pointsPerAction:[{name:"",points:0}],tiers:[{name:"",points:0,rewards:[""]}]}}),h=f=>{var x;let n=(x=f.target.files)==null?void 0:x[0];n&&(l(n),a.setValue("imageFilename",n.name),a.setValue("imageContentType",n.type));},w=async f=>{try{let n=ut.safeParse(f);if(!n.success){console.error("Validation errors:",n.error.format()),a.setError("root",{message:"Please check all required fields are filled correctly"});return}let x={loyaltyProgramName:f.programName,metadata:{organizationName:f.organizationName,brandColor:f.brandColor},tiers:f.tiers.map(E=>({name:E.name,points:E.points,rewards:E.rewards})),pointsPerAction:f.pointsPerAction};if(e==="uri"&&f.metadataUri)x.metadataUri=f.metadataUri;else if(e==="image"&&o){let E=await o.arrayBuffer(),ae=Buffer.from(E).toString("base64");x.imageBuffer=ae,x.imageFilename=o.name,x.imageContentType=o.type;}else throw new Error("Either metadata URI or image file must be provided");console.log("programData",x);let F=await fetch("/api/create-loyalty-program",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!F.ok){let E=await F.json();throw new Error(E.error||"Failed to create loyalty program")}let j=await F.json();i(j),r==null||r(j),a.reset();}catch(n){console.error(n);let x=n instanceof Error?n.message:"An error occurred while creating the loyalty program";a.setError("root",{message:x}),s==null||s(n instanceof Error?n:new Error(x));}},u=()=>{let f=a.getValues("pointsPerAction");a.setValue("pointsPerAction",[...f,{name:"",points:0}]);},p=f=>{let n=a.getValues("pointsPerAction");n.length>1&&a.setValue("pointsPerAction",n.filter((x,F)=>F!==f));},m=()=>{let f=a.getValues("tiers");a.setValue("tiers",[...f,{name:"",points:0,rewards:[""]}]);},y=f=>{let n=a.getValues("tiers");n.length>1&&a.setValue("tiers",n.filter((x,F)=>F!==f));},g=f=>{let x=[...a.getValues("tiers")];x[f]=T(c({},x[f]),{rewards:[...x[f].rewards,""]}),a.setValue("tiers",x);},S=(f,n)=>{let F=[...a.getValues("tiers")];F[f].rewards.length>1&&(F[f]=T(c({},F[f]),{rewards:F[f].rewards.filter((j,E)=>E!==n)}),a.setValue("tiers",F));};return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:a,onSubmit:w,className:"space-y-8"},React.createElement(A,{title:"Basic Information",description:"Enter the basic details of your loyalty program"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement(b,{form:a,name:"programName",label:"Program Name",description:"The name of your loyalty program"},React.createElement(d,{placeholder:"e.g., Coffee Rewards Program",onChange:f=>a.setValue("programName",f.target.value)})),React.createElement(b,{form:a,name:"organizationName",label:"Organization Name",description:"Your organization's name"},React.createElement(d,{placeholder:"e.g., Coffee Brew Co.",onChange:f=>a.setValue("organizationName",f.target.value)}))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},React.createElement("div",{className:"md:col-span-2"},React.createElement(A,{title:"Metadata Upload Method"},React.createElement(ge,{value:e,onValueChange:f=>v(f)},React.createElement(de,{className:"grid w-full grid-cols-2"},React.createElement(te,{value:"uri",className:"flex items-center gap-2"},React.createElement(Link,{className:"h-4 w-4"}),"Pre-uploaded URI"),React.createElement(te,{value:"image",className:"flex items-center gap-2"},React.createElement(Upload,{className:"h-4 w-4"}),"Upload Image")),React.createElement(re,{value:"uri",className:"space-y-4"},React.createElement(b,{form:a,name:"metadataUri",label:"Metadata URI",description:"The URI where your program metadata is stored"},React.createElement(d,{placeholder:"https://arweave.net/...",onChange:f=>a.setValue("metadataUri",f.target.value)})),React.createElement(_,null,React.createElement(G,null,"Provide a pre-uploaded metadata URI. The image and metadata should already be uploaded to Arweave or another decentralized storage."))),React.createElement(re,{value:"image",className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("label",{className:"text-sm font-medium"},"Program Image"),React.createElement("div",{className:"flex items-center gap-4"},React.createElement(d,{type:"file",accept:"image/*",onChange:h,className:"flex-1"}),o&&React.createElement("div",{className:"text-sm text-gray-600"},"Selected: ",o.name))),React.createElement(_,null,React.createElement(G,null,"Upload an image file. The protocol will automatically upload it to Irys and generate metadata.")))))),React.createElement(b,{form:a,name:"brandColor",label:"Brand Color",description:"Your brand's primary color"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement(d,{type:"color",className:"w-14 h-14 p-1",value:a.watch("brandColor"),onChange:f=>a.setValue("brandColor",f.target.value)}),React.createElement(d,{type:"text",value:a.watch("brandColor"),onChange:f=>a.setValue("brandColor",f.target.value)}))))),React.createElement(A,{title:"Points Per Action",description:"Configure the actions that earn points and their values"},React.createElement("div",{className:"space-y-6"},a.watch("pointsPerAction").map((f,n)=>React.createElement("div",{key:n,className:"flex items-end gap-4"},React.createElement("div",{className:"flex-1"},React.createElement(b,{form:a,name:`pointsPerAction.${n}.name`,label:"Action Name",description:"Name of the action that earns points"},React.createElement(d,{placeholder:"e.g., purchase, review, referral",onChange:x=>{let F=a.getValues("pointsPerAction");F[n].name=x.target.value,a.setValue("pointsPerAction",F);}}))),React.createElement("div",{className:"flex-1"},React.createElement(b,{form:a,name:`pointsPerAction.${n}.points`,label:"Points",description:"Points awarded for this action"},React.createElement(d,{type:"number",min:0,onChange:x=>{let F=a.getValues("pointsPerAction");F[n].points=parseInt(x.target.value)||0,a.setValue("pointsPerAction",F);}}))),a.watch("pointsPerAction").length>1&&React.createElement(N,{type:"button",variant:"destructive",onClick:()=>p(n)},"Remove"))),React.createElement(N,{type:"button",variant:"outline",onClick:u},"Add Action"))),React.createElement(A,{title:"Reward Tiers",description:"Define the tiers and rewards for your loyalty program"},React.createElement("div",{className:"space-y-6"},a.watch("tiers").map((f,n)=>React.createElement("div",{key:n,className:"p-6 bg-gradient-to-br from-slate-50 to-slate-100 border border-slate-200 rounded-xl space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white font-bold text-sm"},n+1),React.createElement("h5",{className:"font-semibold"},"Tier ",n+1)),a.watch("tiers").length>1&&React.createElement(N,{type:"button",variant:"ghost",size:"sm",onClick:()=>y(n),className:"text-red-500 hover:text-red-600 hover:bg-red-50"},"Remove Tier")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement(b,{form:a,name:`tiers.${n}.name`,label:"Tier Name",description:"Name of the loyalty tier"},React.createElement(d,{placeholder:"e.g., Bronze",onChange:x=>{let F=a.getValues("tiers");F[n].name=x.target.value,a.setValue("tiers",F);}})),React.createElement(b,{form:a,name:`tiers.${n}.points`,label:"Required Points",description:"Points needed to reach this tier"},React.createElement(d,{type:"number",min:0,onChange:x=>{let F=a.getValues("tiers");F[n].points=parseInt(x.target.value)||0,a.setValue("tiers",F);}}))),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h6",{className:"font-medium"},"Rewards"),React.createElement(N,{type:"button",variant:"outline",size:"sm",onClick:()=>g(n)},"Add Reward")),f.rewards.map((x,F)=>React.createElement("div",{key:F,className:"flex items-end gap-4"},React.createElement("div",{className:"flex-1"},React.createElement(b,{form:a,name:`tiers.${n}.rewards.${F}`,label:"",description:"Reward for this tier"},React.createElement(d,{placeholder:"e.g., 10% cashback",value:f.rewards[F],onChange:j=>{let q=[...a.getValues("tiers")];q[n]=T(c({},q[n]),{rewards:q[n].rewards.map((ae,le)=>le===F?j.target.value:ae)}),a.setValue("tiers",q);}}))),f.rewards.length>1&&React.createElement(N,{type:"button",variant:"ghost",size:"sm",onClick:()=>S(n,F),className:"text-red-500 hover:text-red-600 hover:bg-red-50"},"Remove")))))),React.createElement(N,{type:"button",variant:"outline",onClick:m},"Add Tier"))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:a.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"},a.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Creating Program..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})),"Create Program"))),a.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},a.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Program Created Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.signature))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Collection Details"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Collection Public Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.collection.publicKey),t.updateAuthority&&React.createElement(React.Fragment,null,React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Update Authority Public Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.updateAuthority.publicKey)))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Next Steps"),React.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},React.createElement("p",{className:"text-blue-800"},"Your loyalty program has been created successfully! You can now:"),React.createElement("ul",{className:"mt-2 list-disc list-inside text-blue-700"},React.createElement("li",null,"Use the collection address to create loyalty passes"),React.createElement("li",null,"Update program details using the update authority"),React.createElement("li",null,"View program details using the GetProgramDetails form")))))))}var Rr=I.object({name:I.string().min(1,"Action name is required"),points:I.number().min(0,"Points must be positive")}),Tr=I.object({name:I.string().min(1,"Tier name is required"),points:I.number().min(0,"Points must be positive"),rewards:I.array(I.string()).min(1,"At least one reward is required")}),gt=I.object({collectionAddress:I.string().min(1,"Collection address is required"),pointsPerAction:I.array(Rr).min(1,"At least one action is required"),tiers:I.array(Tr).min(1,"At least one tier is required")});function vt({onSuccess:r,onError:s}){let[t,i]=useState(null),e=useForm({resolver:zodResolver(gt),defaultValues:{collectionAddress:"",pointsPerAction:[{name:"",points:0}],tiers:[{name:"",points:0,rewards:[""]}]}}),v=async p=>{try{let m=gt.safeParse(p);if(!m.success){console.error("Validation errors:",m.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let y={collectionAddress:p.collectionAddress,newTiers:p.tiers,newPointsPerAction:p.pointsPerAction},g=await fetch("/api/update-loyalty-program",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!g.ok){let f=await g.json();throw new Error(f.error||"Failed to update loyalty program")}let S=await g.json();i(S.result),r==null||r(S.result),e.reset({collectionAddress:"",pointsPerAction:[{name:"",points:0}],tiers:[{name:"",points:0,rewards:[""]}]});}catch(m){console.error(m);let y=m instanceof Error?m.message:"An error occurred while updating the loyalty program";e.setError("root",{message:y}),s==null||s(m instanceof Error?m:new Error(y));}},o=()=>{let p=e.getValues("pointsPerAction");e.setValue("pointsPerAction",[...p,{name:"",points:0}]);},l=p=>{let m=e.getValues("pointsPerAction");m.length>1&&e.setValue("pointsPerAction",m.filter((y,g)=>g!==p));},a=()=>{let p=e.getValues("tiers");e.setValue("tiers",[...p,{name:"",points:0,rewards:[""]}]);},h=p=>{let m=e.getValues("tiers");m.length>1&&e.setValue("tiers",m.filter((y,g)=>g!==p));},w=p=>{let m=e.getValues("tiers");m[p].rewards.push(""),e.setValue("tiers",m);},u=(p,m)=>{let y=e.getValues("tiers");y[p].rewards.length>1&&(y[p].rewards=y[p].rewards.filter((g,S)=>S!==m),e.setValue("tiers",y));};return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:e,onSubmit:v,className:"space-y-8"},React.createElement(A,{title:"Program Information",description:"Specify the program to update"},React.createElement(b,{form:e,name:"collectionAddress",label:"Collection Address",description:"The unique address of your loyalty program collection"},React.createElement(d,{placeholder:"Enter the collection address",onChange:p=>e.setValue("collectionAddress",p.target.value)}))),React.createElement(A,{title:"Points Configuration",description:"Update points awarded for different actions"},React.createElement("div",{className:"space-y-6"},e.watch("pointsPerAction").map((p,m)=>React.createElement("div",{key:m,className:"flex items-end gap-4"},React.createElement("div",{className:"flex-1"},React.createElement(b,{form:e,name:`pointsPerAction.${m}.name`,label:"Action Name",description:"Name of the action that earns points"},React.createElement(d,{placeholder:"e.g., purchase, review, referral",onChange:y=>{let g=e.getValues("pointsPerAction");g[m].name=y.target.value,e.setValue("pointsPerAction",g);}}))),React.createElement("div",{className:"flex-1"},React.createElement(b,{form:e,name:`pointsPerAction.${m}.points`,label:"Points",description:"Points awarded for this action"},React.createElement(d,{type:"number",min:0,placeholder:"100",onChange:y=>{let g=e.getValues("pointsPerAction");g[m].points=parseInt(y.target.value)||0,e.setValue("pointsPerAction",g);}}))),e.watch("pointsPerAction").length>1&&React.createElement(N,{type:"button",variant:"destructive",onClick:()=>l(m)},"Remove"))),React.createElement(N,{type:"button",variant:"outline",onClick:o},"Add Action"))),React.createElement(A,{title:"Tier Configuration",description:"Configure loyalty program tiers and rewards"},React.createElement("div",{className:"space-y-6"},e.watch("tiers").map((p,m)=>React.createElement("div",{key:m,className:"p-6 bg-gradient-to-br from-slate-50 to-slate-100 border border-slate-200 rounded-xl space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center text-white font-bold text-sm"},m+1),React.createElement("h5",{className:"font-semibold"},"Tier ",m+1)),e.watch("tiers").length>1&&React.createElement(N,{type:"button",variant:"ghost",size:"sm",onClick:()=>h(m),className:"text-red-500 hover:text-red-600 hover:bg-red-50"},"Remove Tier")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement(b,{form:e,name:`tiers.${m}.name`,label:"Tier Name",description:"Name of the loyalty tier"},React.createElement(d,{placeholder:"e.g., Bronze",onChange:y=>{let g=e.getValues("tiers");g[m].name=y.target.value,e.setValue("tiers",g);}})),React.createElement(b,{form:e,name:`tiers.${m}.points`,label:"Required Points",description:"Points needed to reach this tier"},React.createElement(d,{type:"number",min:0,placeholder:"500",onChange:y=>{let g=e.getValues("tiers");g[m].points=parseInt(y.target.value)||0,e.setValue("tiers",g);}}))),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h6",{className:"font-medium"},"Rewards"),React.createElement(N,{type:"button",variant:"outline",size:"sm",onClick:()=>w(m)},"Add Reward")),p.rewards.map((y,g)=>React.createElement("div",{key:g,className:"flex items-end gap-4"},React.createElement("div",{className:"flex-1"},React.createElement(b,{form:e,name:`tiers.${m}.rewards.${g}`,label:"",description:"Reward for this tier"},React.createElement(d,{placeholder:"e.g., 10% cashback",onChange:S=>{let f=e.getValues("tiers");f[m].rewards[g]=S.target.value,e.setValue("tiers",f);}}))),p.rewards.length>1&&React.createElement(N,{type:"button",variant:"ghost",size:"sm",onClick:()=>u(m,g),className:"text-red-500 hover:text-red-600 hover:bg-red-50"},"Remove")))))),React.createElement(N,{type:"button",variant:"outline",onClick:a},"Add Tier"))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Updating Program..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})),"Update Program"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Loyalty Program Updated Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.signature)))))}var ht=I.object({collectionAddress:I.string().min(1,"Collection address is required"),recipientAddress:I.string().min(1,"Recipient address is required"),passName:I.string().min(1,"Pass name is required"),organizationName:I.string().min(1,"Organization name is required"),passMetadataUri:I.string().optional(),imageBuffer:I.any().optional(),imageFilename:I.string().optional(),imageContentType:I.string().optional()});function yt({onSuccess:r,onError:s}){let[t,i]=useState(null),[e,v]=useState("uri"),[o,l]=useState(null),a=useForm({resolver:zodResolver(ht),defaultValues:{collectionAddress:"",recipientAddress:"",passName:"",organizationName:"",passMetadataUri:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:a,onSubmit:async u=>{try{let p=ht.safeParse(u);if(!p.success){console.error("Validation errors:",p.error.format()),a.setError("root",{message:"Please check all required fields are filled correctly"});return}let m={collectionAddress:u.collectionAddress,recipientAddress:u.recipientAddress,passName:u.passName,organizationName:u.organizationName};if(e==="uri"&&u.passMetadataUri)m.passMetadataUri=u.passMetadataUri;else if(e==="image"&&o){let S=await o.arrayBuffer(),n=Buffer.from(S).toString("base64");m.imageBuffer=n,m.imageFilename=o.name,m.imageContentType=o.type;}else throw new Error("Either metadata URI or image file must be provided");let y=await fetch("/api/issue-loyalty-pass",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!y.ok){let S=await y.json();throw new Error(S.error||"Failed to issue loyalty pass")}let g=await y.json();i(g),r==null||r(g),a.reset();}catch(p){console.error(p);let m=p instanceof Error?p.message:"An error occurred while issuing the loyalty pass";a.setError("root",{message:m}),s==null||s(p instanceof Error?p:new Error(m));}},className:"space-y-8"},React.createElement(A,{title:"Program Information",description:"Specify the loyalty program collection"},React.createElement(b,{form:a,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(d,{placeholder:"Enter the collection address",onChange:u=>a.setValue("collectionAddress",u.target.value)}))),React.createElement(A,{title:"Pass Details",description:"Configure the new loyalty pass details"},React.createElement("div",{className:"space-y-6"},React.createElement(b,{form:a,name:"recipientAddress",label:"Recipient Address",description:"The wallet address that will receive the loyalty pass"},React.createElement(d,{placeholder:"Enter the wallet address of the recipient",onChange:u=>a.setValue("recipientAddress",u.target.value)})),React.createElement(b,{form:a,name:"passName",label:"Pass Name",description:"Name of the loyalty pass"},React.createElement(d,{placeholder:"e.g., Coffee Rewards Pass",onChange:u=>a.setValue("passName",u.target.value)})),React.createElement(b,{form:a,name:"organizationName",label:"Organization Name",description:"Your organization's name"},React.createElement(d,{placeholder:"e.g., Coffee Brew Co.",onChange:u=>a.setValue("organizationName",u.target.value)})))),React.createElement(A,{title:"Metadata Upload Method"},React.createElement(ge,{value:e,onValueChange:u=>v(u)},React.createElement(de,{className:"grid w-full grid-cols-2"},React.createElement(te,{value:"uri",className:"flex items-center gap-2"},React.createElement(Link,{className:"h-4 w-4"}),"Pre-uploaded URI"),React.createElement(te,{value:"image",className:"flex items-center gap-2"},React.createElement(Upload,{className:"h-4 w-4"}),"Upload Image")),React.createElement(re,{value:"uri",className:"space-y-4"},React.createElement(b,{form:a,name:"passMetadataUri",label:"Metadata URI",description:"URI containing the pass metadata"},React.createElement(d,{placeholder:"https://arweave.net/...",onChange:u=>a.setValue("passMetadataUri",u.target.value)})),React.createElement(_,null,React.createElement(G,null,"Provide a pre-uploaded metadata URI. The image and metadata should already be uploaded to Arweave or another decentralized storage."))),React.createElement(re,{value:"image",className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("label",{className:"text-sm font-medium"},"Pass Image"),React.createElement("div",{className:"flex items-center gap-4"},React.createElement(d,{type:"file",accept:"image/*",onChange:u=>{var m;let p=(m=u.target.files)==null?void 0:m[0];p&&(l(p),a.setValue("imageFilename",p.name),a.setValue("imageContentType",p.type));},className:"flex-1"}),o&&React.createElement("div",{className:"text-sm text-gray-600"},"Selected: ",o.name))),React.createElement(_,null,React.createElement(G,null,"Upload an image file. The protocol will automatically upload it to Irys and generate metadata."))))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:a.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-violet-500 to-purple-500 hover:from-violet-600 hover:to-purple-600"},a.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Issuing Pass..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})),"Issue Pass"))),a.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},a.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Pass Issued Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.signature))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Pass Details"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Pass Public Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.asset.publicKey))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Next Steps"),React.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},React.createElement("p",{className:"text-blue-800"},"Your loyalty pass has been issued successfully! You can now:"),React.createElement("ul",{className:"mt-2 list-disc list-inside text-blue-700"},React.createElement("li",null,"View pass details using the GetAssetData"),React.createElement("li",null,"Transfer the pass to another wallet if needed")))))))}var xt=I.object({collectionAddress:I.string().min(1,"Collection address is required"),passAddress:I.string().min(1,"Pass address is required"),newOwner:I.string().min(1,"New owner address is required")});function bt({onError:r}){let[s,t]=useState(false),i=useForm({resolver:zodResolver(xt),defaultValues:{collectionAddress:"",passAddress:"",newOwner:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:i,onSubmit:async v=>{try{let o=xt.safeParse(v);if(!o.success){console.error("Validation errors:",o.error.format()),i.setError("root",{message:"Please check all required fields are filled correctly"});return}let l={collectionAddress:v.collectionAddress,passAddress:v.passAddress,newOwner:v.newOwner},a=await fetch("/api/approve-transfer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!a.ok){let w=await a.json();throw new Error(w.error||"Failed to approve transfer")}let h=await a.json();t(!0),i.reset({collectionAddress:"",passAddress:"",newOwner:""});}catch(o){console.error(o);let l=o instanceof Error?o.message:"An error occurred while approving transfer";i.setError("root",{message:l}),r==null||r(o instanceof Error?o:new Error(l));}},className:"space-y-8"},React.createElement(A,{title:"Transfer Information",description:"Enter the details of the loyalty pass transfer"},React.createElement("div",{className:"space-y-6"},React.createElement(b,{form:i,name:"collectionAddress",label:"Collection Address",description:"The address of the voucher or pass collection"},React.createElement(d,{placeholder:"Enter the collection address",onChange:v=>i.setValue("collectionAddress",v.target.value)})),React.createElement(b,{form:i,name:"passAddress",label:"Pass Address",description:"The unique address of the loyalty pass being transferred"},React.createElement(d,{placeholder:"Enter the loyalty pass address to transfer",onChange:v=>i.setValue("passAddress",v.target.value)})),React.createElement(b,{form:i,name:"newOwner",label:"New Owner Address",description:"The wallet address that will receive the loyalty pass"},React.createElement(d,{placeholder:"Enter the new owner's wallet address",onChange:v=>i.setValue("newOwner",v.target.value)})))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:i.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-600 hover:to-green-600"},i.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Approving Transfer..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),"Approve Transfer"))),i.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},i.formState.errors.root.message))))),s&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Transfer Approved Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed"))))}var Nt=I.object({collectionAddress:I.string().min(1,"Collection address is required"),passAddress:I.string().min(1,"Pass address is required"),message:I.string().min(1,"Message content is required").max(500,"Message content must be less than 500 characters")});function wt({onSuccess:r,onError:s}){let[t,i]=useState(null),e=useForm({resolver:zodResolver(Nt),defaultValues:{collectionAddress:"",passAddress:"",message:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:e,onSubmit:async o=>{try{let l=Nt.safeParse(o);if(!l.success){console.error("Validation errors:",l.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let a={collectionAddress:o.collectionAddress,passAddress:o.passAddress,message:o.message},h=await fetch("/api/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!h.ok){let u=await h.json();throw new Error(u.error||"Failed to send message")}let w=await h.json();i(w.result),r==null||r(w.result),e.reset({collectionAddress:"",passAddress:"",message:""});}catch(l){console.error(l);let a=l instanceof Error?l.message:"An error occurred while sending the message";e.setError("root",{message:a}),s==null||s(l instanceof Error?l:new Error(a));}},className:"space-y-8"},React.createElement(A,{title:"Program Information",description:"Specify the program and pass for the message"},React.createElement("div",{className:"space-y-6"},React.createElement(b,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(d,{placeholder:"Enter the collection address",onChange:o=>e.setValue("collectionAddress",o.target.value)})),React.createElement(b,{form:e,name:"passAddress",label:"Pass Address",description:"The address of the loyalty pass"},React.createElement(d,{placeholder:"Enter the loyalty pass address",onChange:o=>e.setValue("passAddress",o.target.value)})))),React.createElement(A,{title:"Message Details",description:"Compose your message to the pass holder"},React.createElement("div",{className:"space-y-6"},React.createElement(b,{form:e,name:"message",label:"Message Content",description:"Maximum 500 characters. Be clear and engaging."},React.createElement("textarea",{className:"flex min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter your message content here...",value:e.watch("message"),onChange:o=>e.setValue("message",o.target.value),rows:6,maxLength:500})))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-indigo-500 to-blue-500 hover:from-indigo-600 hover:to-blue-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Sending Message..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})),"Send Message"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Message Sent Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.signature)))))}var Ft=I.object({collectionAddress:I.string().min(1,"Collection address is required"),passAddress:I.string().min(1,"Pass address is required"),pointsToRevoke:I.number().min(1,"Points must be at least 1")});function Vt({onSuccess:r,onError:s}){let[t,i]=useState(null),e=useForm({resolver:zodResolver(Ft),defaultValues:{collectionAddress:"",passAddress:"",pointsToRevoke:0}});return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:e,onSubmit:async o=>{try{let l=Ft.safeParse(o);if(!l.success){console.error("Validation errors:",l.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let a={collectionAddress:o.collectionAddress,passAddress:o.passAddress,pointsToRevoke:o.pointsToRevoke},h=await fetch("/api/revoke-loyalty-points",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!h.ok){let u=await h.json();throw new Error(u.error||"Failed to revoke loyalty points")}let w=await h.json();i(w.result),r==null||r(w.result),e.reset({collectionAddress:"",passAddress:"",pointsToRevoke:0});}catch(l){console.error(l);let a=l instanceof Error?l.message:"An error occurred while revoking points";e.setError("root",{message:a}),s==null||s(l instanceof Error?l:new Error(a));}},className:"space-y-8"},React.createElement(A,{title:"Program Information",description:"Specify the loyalty program collection"},React.createElement(b,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(d,{placeholder:"Enter the collection address",onChange:o=>e.setValue("collectionAddress",o.target.value)}))),React.createElement(A,{title:"Pass Information",description:"Specify the loyalty pass to revoke points from"},React.createElement(b,{form:e,name:"passAddress",label:"Pass Address",description:"The unique address of the loyalty pass"},React.createElement(d,{placeholder:"Enter the loyalty pass address",onChange:o=>e.setValue("passAddress",o.target.value)}))),React.createElement(A,{title:"Revocation Details",description:"Configure the amount of points to revoke"},React.createElement(b,{form:e,name:"pointsToRevoke",label:"Points to Revoke",description:"Number of points to remove from the user"},React.createElement(d,{type:"number",min:1,placeholder:"Enter number of points",onChange:o=>e.setValue("pointsToRevoke",parseInt(o.target.value)||0)}))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Revoking Points..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})),"Revoke Points"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Points Revoked Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.signature))))))}var Ct=I.object({collectionAddress:I.string().min(1,"Collection address is required"),passAddress:I.string().min(1,"Pass address is required"),pointsToGift:I.number().min(1,"Points must be at least 1"),action:I.string().min(1,"Action name is required")});function St({onSuccess:r,onError:s}){let[t,i]=useState(null),e=useForm({resolver:zodResolver(Ct),defaultValues:{collectionAddress:"",passAddress:"",pointsToGift:0,action:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:e,onSubmit:async o=>{try{let l=Ct.safeParse(o);if(!l.success){console.error("Validation errors:",l.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let a={collectionAddress:o.collectionAddress,passAddress:o.passAddress,pointsToGift:o.pointsToGift,action:o.action},h=await fetch("/api/gift-loyalty-points",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!h.ok){let u=await h.json();throw new Error(u.error||"Failed to gift loyalty points")}let w=await h.json();console.log("result",w),i(w.result),r==null||r(w.result),e.reset({collectionAddress:"",passAddress:"",pointsToGift:0,action:""});}catch(l){console.error(l);let a=l instanceof Error?l.message:"An error occurred while gifting points";e.setError("root",{message:a}),s==null||s(l instanceof Error?l:new Error(a));}},className:"space-y-8"},React.createElement(A,{title:"Program Information",description:"Specify the loyalty program collection"},React.createElement(b,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(d,{placeholder:"Enter the collection address",onChange:o=>e.setValue("collectionAddress",o.target.value)}))),React.createElement(A,{title:"Pass Information",description:"Specify the loyalty pass to gift points to"},React.createElement(b,{form:e,name:"passAddress",label:"Pass Address",description:"The unique address of the loyalty pass"},React.createElement(d,{placeholder:"Enter the loyalty pass address",onChange:o=>e.setValue("passAddress",o.target.value)}))),React.createElement(A,{title:"Gift Details",description:"Configure the gift amount and action"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement(b,{form:e,name:"pointsToGift",label:"Points to Gift",description:"Number of points to gift"},React.createElement(d,{type:"number",min:1,placeholder:"Enter number of points",onChange:o=>e.setValue("pointsToGift",parseInt(o.target.value)||0)})),React.createElement(b,{form:e,name:"action",label:"Action Name",description:"Custom action name for the gift (e.g., birthday_bonus)"},React.createElement(d,{placeholder:"e.g., birthday_bonus",onChange:o=>e.setValue("action",o.target.value)})))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Gifting Points..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})),"Gift Points"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Points Gifted Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.signature))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Points Details"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"New Total Points:")," ",t.points),t.newTier&&React.createElement(React.Fragment,null,React.createElement("p",null,React.createElement("span",{className:"font-medium"},"New Tier:")," ",t.newTier.name),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Tier XP Required:")," ",t.newTier.xpRequired),React.createElement("div",{className:"mt-2"},React.createElement("p",{className:"font-medium"},"Tier Rewards:"),React.createElement("ul",{className:"list-disc list-inside text-sm text-gray-600"},t.newTier.rewards.map((o,l)=>React.createElement("li",{key:l},o))))))))))}var At=I.object({passAddress:I.string().min(1,"Pass address is required")});function Pt({onSuccess:r,onError:s}){var o,l;let[t,i]=useState(null),e=useForm({resolver:zodResolver(At),defaultValues:{passAddress:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:e,onSubmit:async a=>{try{let h=At.safeParse(a);if(!h.success){console.error("Validation errors:",h.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let w={passAddress:a.passAddress},u=await fetch("/api/get-asset-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!u.ok){let m=await u.json();throw new Error(m.error||"Failed to get asset data")}let p=await u.json();i(p.result),p.result&&(r==null||r(p.result)),e.reset();}catch(h){console.error(h);let w=h instanceof Error?h.message:"An error occurred while fetching asset data";e.setError("root",{message:w}),s==null||s(h instanceof Error?h:new Error(w));}},className:"space-y-8"},React.createElement(A,{title:"Pass Information",description:"Enter the loyalty pass address to fetch details"},React.createElement(b,{form:e,name:"passAddress",label:"Pass Address",description:"The unique address of the loyalty pass"},React.createElement(d,{placeholder:"Enter the loyalty pass address",onChange:a=>e.setValue("passAddress",a.target.value)}))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Fetching Data..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})),"Get Data"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("h2",{className:"text-2xl font-bold mb-6 text-gray-900"},t.name),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Basic Information"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Organization:")," ",t.metadata.organizationName),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Current XP:")," ",t.xp),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Current Tier:")," ",t.currentTier),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Brand Color:"),React.createElement("span",{className:"inline-block w-4 h-4 ml-2 rounded-full",style:{backgroundColor:t.metadata.brandColor}})))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Owner Information"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Owner Address:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.owner),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Pass Address:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.pass))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Available Tiers"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},t.rewardTiers.map(a=>React.createElement("div",{key:a.name,className:"p-4 bg-gray-50 rounded-lg"},React.createElement("h4",{className:"font-medium text-lg mb-2"},a.name),React.createElement("p",{className:"text-gray-600 mb-2"},"Required XP: ",a.xpRequired),React.createElement("div",{className:"space-y-1"},React.createElement("p",{className:"font-medium text-sm text-gray-700"},"Rewards:"),React.createElement("ul",{className:"list-disc list-inside text-sm text-gray-600"},a.rewards.map((h,w)=>React.createElement("li",{key:w},h)))))))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Action History"),t.actionHistory.length>0?React.createElement("div",{className:"space-y-2"},t.actionHistory.map((a,h)=>React.createElement("div",{key:h,className:"p-3 bg-gray-50 rounded-lg"},React.createElement("p",{className:"text-sm text-gray-600"},a)))):React.createElement("p",{className:"text-gray-500 italic"},"No actions recorded yet")),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Last Action"),React.createElement("p",{className:"text-gray-600"},t.lastAction?React.createElement("span",null,t.lastAction):React.createElement("span",{className:"italic"},"No actions performed yet"))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Broadcasts"),React.createElement("div",{className:"space-y-4"},t.broadcasts.broadcasts.map(a=>React.createElement("div",{key:a.id,className:"p-4 bg-gray-50 rounded-lg"},React.createElement("div",{className:"flex items-start justify-between"},React.createElement("div",{className:"space-y-2"},React.createElement("p",{className:"text-gray-900"},a.content),React.createElement("p",{className:"text-sm text-gray-500"},"From: ",a.sender),React.createElement("p",{className:"text-sm text-gray-500"},new Date(a.timestamp).toLocaleString())),!a.read&&React.createElement("span",{className:"px-2 py-1 text-xs font-medium text-blue-800 bg-blue-100 rounded-full"},"New")))),t.broadcasts.broadcasts.length===0&&React.createElement("p",{className:"text-gray-500 text-center py-4"},"No broadcasts yet"))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Message History"),React.createElement("div",{className:"space-y-4"},(o=t.messageHistory)==null?void 0:o.map(a=>React.createElement("div",{key:a.id,className:"p-4 bg-gray-50 rounded-lg"},React.createElement("div",{className:"flex items-start justify-between"},React.createElement("div",{className:"space-y-2"},React.createElement("p",{className:"text-gray-900"},a.content),React.createElement("p",{className:"text-sm text-gray-500"},"From: ",a.sender),React.createElement("p",{className:"text-sm text-gray-500"},new Date(a.timestamp).toLocaleString())),!a.read&&React.createElement("span",{className:"px-2 py-1 text-xs font-medium text-blue-800 bg-blue-100 rounded-full"},"New")))),((l=t.messageHistory)==null?void 0:l.length)===0&&React.createElement("p",{className:"text-gray-500 text-center py-4"},"No messages yet"))))))}var Rt=I.object({collectionAddress:I.string().min(1,"Collection address is required")});function Tt({onSuccess:r,onError:s}){let[t,i]=useState(null),e=useForm({resolver:zodResolver(Rt),defaultValues:{collectionAddress:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:e,onSubmit:async o=>{try{let l=Rt.safeParse(o);if(!l.success){console.error("Validation errors:",l.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let a={collectionAddress:o.collectionAddress},h=await fetch("/api/get-program-details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!h.ok){let u=await h.json();throw new Error(u.error||"Failed to get program details")}let w=await h.json();i(w.result),r==null||r(w.result),e.reset();}catch(l){console.error(l);let a=l instanceof Error?l.message:"An error occurred while fetching program details";e.setError("root",{message:a}),s==null||s(l instanceof Error?l:new Error(a));}},className:"space-y-8"},React.createElement(A,{title:"Program Information",description:"Enter the collection address to fetch program details"},React.createElement(b,{form:e,name:"collectionAddress",label:"Collection Address",description:"The unique address of the loyalty program collection"},React.createElement(d,{placeholder:"Enter the collection address",onChange:o=>e.setValue("collectionAddress",o.target.value)}))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Fetching Details..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),"Get Details"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("h2",{className:"text-2xl font-bold mb-6 text-gray-900"},t.name),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Basic Information"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Organization:")," ",t.metadata.organizationName),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Total Minted:")," ",t.numMinted),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Brand Color:"),React.createElement("span",{className:"inline-block w-4 h-4 ml-2 rounded-full",style:{backgroundColor:t.metadata.brandColor}})))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Points Per Action"),React.createElement("div",{className:"space-y-2"},Object.entries(t.pointsPerAction).map(([o,l])=>React.createElement("p",{key:o},React.createElement("span",{className:"font-medium capitalize"},o,":")," ",l," points")))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Loyalty Tiers"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},t.tiers.map(o=>React.createElement("div",{key:o.name,className:"p-4 bg-gray-50 rounded-lg"},React.createElement("h4",{className:"font-medium text-lg mb-2"},o.name),React.createElement("p",{className:"text-gray-600 mb-2"},"Required XP: ",o.xpRequired),React.createElement("div",{className:"space-y-1"},React.createElement("p",{className:"font-medium text-sm text-gray-700"},"Rewards:"),React.createElement("ul",{className:"list-disc list-inside text-sm text-gray-600"},o.rewards.map((l,a)=>React.createElement("li",{key:a},l)))))))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Authority Information"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("p",{className:"text-sm text-gray-600"},"Update Authority"),React.createElement("p",{className:"font-mono text-sm"},t.updateAuthority)),React.createElement("div",null,React.createElement("p",{className:"text-sm text-gray-600"},"Transfer Authority"),React.createElement("p",{className:"font-mono text-sm"},t.transferAuthority)))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Broadcasts"),React.createElement("div",{className:"space-y-4"},t.broadcasts.broadcasts.map(o=>React.createElement("div",{key:o.id,className:"p-4 bg-gray-50 rounded-lg"},React.createElement("div",{className:"flex items-start justify-between"},React.createElement("div",{className:"space-y-2"},React.createElement("p",{className:"text-gray-900"},o.content),React.createElement("p",{className:"text-sm text-gray-500"},"From: ",o.sender),React.createElement("p",{className:"text-sm text-gray-500"},new Date(o.timestamp).toLocaleString())),!o.read&&React.createElement("span",{className:"px-2 py-1 text-xs font-medium text-blue-800 bg-blue-100 rounded-full"},"New")))),t.broadcasts.broadcasts.length===0&&React.createElement("p",{className:"text-gray-500 text-center py-4"},"No broadcasts yet"))))))}var Dt=I.object({collectionAddress:I.string().min(1,"Collection address is required"),passAddress:I.string().min(1,"Pass address is required"),action:I.string().min(1,"Action is required"),multiplier:I.number().min(1).max(10).optional()});function kt({onSuccess:r,onError:s}){let[t,i]=useState(null),e=useForm({resolver:zodResolver(Dt),defaultValues:{collectionAddress:"",passAddress:"",action:"purchase",multiplier:1}});return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:e,onSubmit:async o=>{try{let l=Dt.safeParse(o);if(!l.success){console.error("Validation errors:",l.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let a={collectionAddress:o.collectionAddress,passAddress:o.passAddress,action:o.action,multiplier:o.multiplier},h=await fetch("/api/award-loyalty-points",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!h.ok){let u=await h.json();throw new Error(u.error||"Failed to award loyalty points")}let w=await h.json();i(w.result),r==null||r(w.result),e.reset({collectionAddress:"",passAddress:"",action:"purchase",multiplier:1});}catch(l){console.error(l);let a=l instanceof Error?l.message:"An error occurred while awarding points";e.setError("root",{message:a}),s==null||s(l instanceof Error?l:new Error(a));}},className:"space-y-8"},React.createElement(A,{title:"Program Information",description:"Specify the loyalty program collection"},React.createElement(b,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(d,{placeholder:"Enter the collection address",onChange:o=>e.setValue("collectionAddress",o.target.value)}))),React.createElement(A,{title:"Pass Information",description:"Specify the loyalty pass to award points to"},React.createElement(b,{form:e,name:"passAddress",label:"Pass Address",description:"The unique address of the loyalty pass"},React.createElement(d,{placeholder:"Enter the loyalty pass address",onChange:o=>e.setValue("passAddress",o.target.value)}))),React.createElement(A,{title:"Action Details",description:"Configure the action and points multiplier"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement(b,{form:e,name:"action",label:"Action Type",description:"Enter the action that triggers the reward"},React.createElement(d,{placeholder:"e.g., purchase, review, referral",onChange:o=>e.setValue("action",o.target.value)})),React.createElement(b,{form:e,name:"multiplier",label:"Points Multiplier",description:"Multiply the base points by this factor (1-10)"},React.createElement(d,{type:"number",min:1,max:10,placeholder:"1",onChange:o=>e.setValue("multiplier",parseInt(o.target.value)||1)})))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Awarding Points..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})),"Award Points"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Points Awarded Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.signature))))))}var zt=I.object({collectionAddress:I.string().min(1,"Collection address is required"),message:I.string().min(1,"Message is required").max(500,"Message must be less than 500 characters")});function Lt({onSuccess:r,onError:s}){let[t,i]=useState(null),e=useForm({resolver:zodResolver(zt),defaultValues:{collectionAddress:"",message:""}});return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:e,onSubmit:async o=>{try{let l=zt.safeParse(o);if(!l.success){console.error("Validation errors:",l.error.format()),e.setError("root",{message:"Please check all required fields are filled correctly"});return}let a={collectionAddress:o.collectionAddress,message:o.message},h=await fetch("/api/send-broadcast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!h.ok){let u=await h.json();throw new Error(u.error||"Failed to send broadcast")}let w=await h.json();i(w.result),r==null||r(w.result),e.reset({collectionAddress:"",message:""});}catch(l){console.error(l);let a=l instanceof Error?l.message:"An error occurred while sending the broadcast";e.setError("root",{message:a}),s==null||s(l instanceof Error?l:new Error(a));}},className:"space-y-8"},React.createElement(A,{title:"Program Information",description:"Specify the program for the broadcast"},React.createElement(b,{form:e,name:"collectionAddress",label:"Collection Address",description:"The address of the loyalty program collection"},React.createElement(d,{placeholder:"Enter the collection address",onChange:o=>e.setValue("collectionAddress",o.target.value)}))),React.createElement(A,{title:"Broadcast Message",description:"Compose your message to all pass holders"},React.createElement(b,{form:e,name:"message",label:"Message Content",description:"The message to broadcast to all pass holders (max 500 characters)"},React.createElement("textarea",{className:"flex min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Enter your broadcast message...",value:e.watch("message"),onChange:o=>e.setValue("message",o.target.value),maxLength:500}))),React.createElement("div",{className:"flex justify-center pt-8"},React.createElement(N,{type:"submit",disabled:e.formState.isSubmitting,className:"px-12 py-4 text-lg font-bold bg-gradient-to-r from-sky-500 to-blue-500 hover:from-sky-600 hover:to-blue-600"},e.formState.isSubmitting?React.createElement(React.Fragment,null,React.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},React.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),React.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Sending Broadcast..."):React.createElement(React.Fragment,null,React.createElement("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})),"Send Broadcast"))),e.formState.errors.root&&React.createElement("div",{className:"rounded-lg bg-red-50 p-4 mt-6"},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-shrink-0"},React.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),React.createElement("div",{className:"ml-3"},React.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),React.createElement("div",{className:"mt-2 text-sm text-red-700"},e.formState.errors.root.message))))),t&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Broadcast Sent Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},t.signature)))))}var K=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement("div",c({ref:t,className:V("rounded-lg border bg-card text-card-foreground shadow-sm",r)},s))});K.displayName="Card";var J=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement("div",c({ref:t,className:V("flex flex-col space-y-1.5 p-6",r)},s))});J.displayName="CardHeader";var oa=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement("h3",c({ref:t,className:V("text-2xl font-semibold leading-none tracking-tight",r)},s))});oa.displayName="CardTitle";var Y=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement("p",c({ref:t,className:V("text-sm text-muted-foreground",r)},s))});Y.displayName="CardDescription";var X=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement("div",c({ref:t,className:V("p-6 pt-0",r)},s))});X.displayName="CardContent";var ia=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement("div",c({ref:t,className:V("flex items-center p-6 pt-0",r)},s))});ia.displayName="CardFooter";var ca=z$1.object({voucherCollectionName:z$1.string().min(1,"Collection name is required"),metadataUri:z$1.string().optional(),imageBuffer:z$1.any().optional(),imageFilename:z$1.string().optional(),imageContentType:z$1.string().optional(),description:z$1.string().optional(),metadata:z$1.object({merchantName:z$1.string().min(1,"Merchant name is required"),merchantAddress:z$1.string().min(1,"Merchant address is required"),voucherTypes:z$1.array(z$1.string()).min(1,"At least one voucher type is required"),description:z$1.string().optional(),terms:z$1.string().optional()})});function Mt({onSuccess:r,onError:s}){var j,E,q,ae,le,pe,ue;let[t,i]=useState(false),[e,v]=useState("uri"),[o,l]=useState(null),[a,h]=useState(null),w=useForm({resolver:zodResolver(ca),defaultValues:{voucherCollectionName:"",metadata:{merchantName:"",merchantAddress:"",voucherTypes:[],description:"",terms:""}}}),{register:u,handleSubmit:p,formState:{errors:m},setValue:y,watch:g}=w,S=g("metadata.voucherTypes"),f=["percentage_off","fixed_verxio_credits","free_item","buy_one_get_one","custom_reward"],n=k=>{var O;let L=(O=k.target.files)==null?void 0:O[0];L&&(l(L),y("imageFilename",L.name),y("imageContentType",L.type));},x=(k,L)=>{let O=S||[];L?y("metadata.voucherTypes",[...O,k]):y("metadata.voucherTypes",O.filter(oe=>oe!==k));};return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:w,onSubmit:async k=>{i(true);try{let L={voucherCollectionName:k.voucherCollectionName,metadata:{merchantName:k.metadata.merchantName,merchantAddress:k.metadata.merchantAddress,voucherTypes:k.metadata.voucherTypes},description:k.description||k.metadata.description||`Voucher collection for ${k.metadata.merchantName}`};if(e==="uri"&&k.metadataUri)L.metadataUri=k.metadataUri;else if(e==="image"&&o){let Ne=await o.arrayBuffer(),Ae=Buffer.from(Ne).toString("base64");L.imageBuffer=Ae,L.imageFilename=o.name,L.imageContentType=o.type;}else throw new Error("Either metadata URI or image file must be provided");let O=await fetch("/api/create-voucher-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!O.ok){let Ne=await O.json();throw new Error(Ne.error||"Failed to create voucher collection")}let oe=await O.json();h(oe),r==null||r(oe),w.reset();}catch(L){console.error("Error creating voucher collection:",L),s==null||s(L);}finally{i(false);}}},React.createElement(K,null,React.createElement(J,null,React.createElement(Y,null,"Create a collection to organize vouchers by merchant and type. You can either provide a pre-uploaded metadata URI or upload an image to auto-generate metadata.")),React.createElement(X,{className:"space-y-6"},React.createElement(M,{title:"Collection Details"},React.createElement(D,{label:"Collection Name",error:(j=m.voucherCollectionName)==null?void 0:j.message},React.createElement(d,T(c({},u("voucherCollectionName")),{placeholder:"Summer Sale Vouchers"})))),React.createElement(M,{title:"Metadata Upload Method"},React.createElement(ge,{value:e,onValueChange:k=>v(k)},React.createElement(de,{className:"grid w-full grid-cols-2"},React.createElement(te,{value:"uri",className:"flex items-center gap-2"},React.createElement(Link,{className:"h-4 w-4"}),"Pre-uploaded URI"),React.createElement(te,{value:"image",className:"flex items-center gap-2"},React.createElement(Upload,{className:"h-4 w-4"}),"Upload Image")),React.createElement(re,{value:"uri",className:"space-y-4"},React.createElement(D,{label:"Metadata URI",error:(E=m.metadataUri)==null?void 0:E.message},React.createElement(d,T(c({},u("metadataUri")),{placeholder:"https://arweave.net/..."}))),React.createElement(_,null,React.createElement(G,null,"Provide a pre-uploaded metadata URI. The image and metadata should already be uploaded to Arweave or another decentralized storage."))),React.createElement(re,{value:"image",className:"space-y-4"},React.createElement(D,{label:"Collection Image"},React.createElement("div",{className:"flex items-center gap-4"},React.createElement(d,{type:"file",accept:"image/*",onChange:n,className:"flex-1"}),o&&React.createElement("div",{className:"text-sm text-gray-600"},"Selected: ",o.name))),React.createElement(_,null,React.createElement(G,null,"Upload an image file. The protocol will automatically upload it to Irys and generate metadata."))))),React.createElement(M,{title:"Merchant Information"},React.createElement(D,{label:"Merchant Name",error:(ae=(q=m.metadata)==null?void 0:q.merchantName)==null?void 0:ae.message},React.createElement(d,T(c({},u("metadata.merchantName")),{placeholder:"Coffee Brew"}))),React.createElement(D,{label:"Merchant Address",error:(pe=(le=m.metadata)==null?void 0:le.merchantAddress)==null?void 0:pe.message},React.createElement(d,T(c({},u("metadata.merchantAddress")),{placeholder:"coffee_brew_merchant_001"})))),React.createElement(M,{title:"Voucher Types"},React.createElement("div",{className:"space-y-3"},React.createElement(me,null,"Select voucher types for this collection"),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},f.map(k=>React.createElement("div",{key:k,className:"flex items-center space-x-2"},React.createElement("input",{type:"checkbox",id:k,checked:(S==null?void 0:S.includes(k))||false,onChange:L=>x(k,L.target.checked),className:"rounded border-gray-300"}),React.createElement(me,{htmlFor:k,className:"text-sm font-medium"},k.split("_").map(L=>L.charAt(0).toUpperCase()+L.slice(1)).join(" "))))),((ue=m.metadata)==null?void 0:ue.voucherTypes)&&React.createElement("p",{className:"text-sm text-red-600"},m.metadata.voucherTypes.message))),React.createElement("div",{className:"flex justify-end"},React.createElement(N,{type:"submit",disabled:t},t?"Creating Collection...":"Create Voucher Collection"))))),a&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Collection Created Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},a.signature))),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Collection Public Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},a.collection.publicKey),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Collection Secret Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},a.collection.secretKey))),a.updateAuthority&&React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Update Authority Details"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Update Authority Public Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},a.updateAuthority.publicKey),React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Update Authority Secret Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},a.updateAuthority.secretKey))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Next Steps"),React.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},React.createElement("p",{className:"text-blue-800"},"Your voucher collection has been created successfully! You can now:"),React.createElement("ul",{className:"mt-2 list-disc list-inside text-blue-700"},React.createElement("li",null,"Use the collection address to mint individual vouchers")))))))}var xe=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement("textarea",c({className:V("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t},s))});xe.displayName="Textarea";var Bt=R.Root;var It=R.Value,Ye=z.forwardRef((e,i)=>{var v=e,{className:r,children:s}=v,t=C(v,["className","children"]);return z.createElement(R.Trigger,c({ref:i,className:V("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},t),s,z.createElement(R.Icon,{asChild:true},z.createElement(ChevronDown,{className:"h-4 w-4 opacity-50"})))});Ye.displayName=R.Trigger.displayName;var Ut=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement(R.ScrollUpButton,c({ref:t,className:V("flex cursor-default items-center justify-center py-1",r)},s),z.createElement(ChevronUp,{className:"h-4 w-4"}))});Ut.displayName=R.ScrollUpButton.displayName;var jt=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement(R.ScrollDownButton,c({ref:t,className:V("flex cursor-default items-center justify-center py-1",r)},s),z.createElement(ChevronDown,{className:"h-4 w-4"}))});jt.displayName=R.ScrollDownButton.displayName;var Xe=z.forwardRef((v,e)=>{var o=v,{className:r,children:s,position:t="popper"}=o,i=C(o,["className","children","position"]);return z.createElement(R.Portal,null,z.createElement(R.Content,c({ref:e,className:V("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t},i),z.createElement(Ut,null),z.createElement(R.Viewport,{className:V("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]")},s),z.createElement(jt,null)))});Xe.displayName=R.Content.displayName;var fa=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement(R.Label,c({ref:t,className:V("py-1.5 pl-8 pr-2 text-sm font-semibold",r)},s))});fa.displayName=R.Label.displayName;var be=z.forwardRef((e,i)=>{var v=e,{className:r,children:s}=v,t=C(v,["className","children"]);return z.createElement(R.Item,c({ref:i,className:V("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},t),z.createElement("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},z.createElement(R.ItemIndicator,null,z.createElement(Check,{className:"h-4 w-4"}))),z.createElement(R.ItemText,null,s))});be.displayName=R.Item.displayName;var ga=z.forwardRef((i,t)=>{var e=i,{className:r}=e,s=C(e,["className"]);return z.createElement(R.Separator,c({ref:t,className:V("-mx-1 my-1 h-px bg-muted",r)},s))});ga.displayName=R.Separator.displayName;var ba=z$1.object({collectionAddress:z$1.string().min(1,"Collection address is required"),voucherName:z$1.string().min(1,"Voucher name is required"),recipient:z$1.string().min(1,"Recipient address is required"),metadataUri:z$1.string().optional(),imageBuffer:z$1.any().optional(),imageFilename:z$1.string().optional(),imageContentType:z$1.string().optional(),voucherData:z$1.object({type:z$1.enum(["percentage_off","fixed_verxio_credits","free_item","buy_one_get_one","custom_reward"]),value:z$1.number().min(0,"Value must be positive"),maxUses:z$1.number().min(1,"Max uses must be at least 1"),expiryDate:z$1.string().min(1,"Expiry date is required"),description:z$1.string().min(1,"Description is required"),merchantId:z$1.string().min(1,"Merchant ID is required"),conditions:z$1.array(z$1.string()).optional()})});function qt({onSuccess:r,onError:s}){var q,ae,le,pe,ue,k,L,O,oe,Ne,Oe,Ae,rt,at,st,ot;let[t,i]=useState(false),[e,v]=useState("uri"),[o,l]=useState(null),[a,h]=useState([]),[w,u]=useState(null),p=useForm({resolver:zodResolver(ba),defaultValues:{voucherName:"",recipient:"",voucherData:{type:"percentage_off",value:0,maxUses:1,expiryDate:"",description:"",merchantId:"",conditions:[]}}}),{register:m,handleSubmit:y,formState:{errors:g},setValue:S,watch:f}=p,n=H=>{var ee;let U=(ee=H.target.files)==null?void 0:ee[0];U&&(l(U),S("imageFilename",U.name),S("imageContentType",U.type));},x=()=>{h([...a,""]);},F=(H,U)=>{let ee=[...a];ee[H]=U,h(ee),S("voucherData.conditions",ee.filter(we=>we.trim()!==""));},j=H=>{let U=a.filter((ee,we)=>we!==H);h(U),S("voucherData.conditions",U);};return React.createElement("div",{className:"space-y-8"},React.createElement(P,{form:p,onSubmit:async H=>{i(true);try{let U={collectionAddress:H.collectionAddress,voucherName:H.voucherName,recipient:H.recipient,voucherData:T(c({},H.voucherData),{expiryDate:H.voucherData.expiryDate})};if(e==="uri"&&H.metadataUri)U.metadataUri=H.metadataUri;else if(e==="image"&&o){let _e=await o.arrayBuffer(),sr=Buffer.from(_e).toString("base64");U.imageBuffer=sr,U.imageFilename=o.name,U.imageContentType=o.type;}else throw new Error("Either metadata URI or image file must be provided");let ee=await fetch("/api/mint-voucher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});if(!ee.ok){let _e=await ee.json();throw new Error(_e.error||"Failed to mint voucher")}let we=await ee.json();u(we),r==null||r(we),p.reset();}catch(U){console.error("Error minting voucher:",U),s==null||s(U);}finally{i(false);}}},React.createElement(K,null,React.createElement(J,null,React.createElement(Y,null,"Create and distribute individual vouchers within a collection. You can either provide a pre-uploaded metadata URI or upload an image to auto-generate metadata.")),React.createElement(X,{className:"space-y-6"},React.createElement(M,{title:""},React.createElement(D,{label:"Voucher Collection Address",error:(q=g.collectionAddress)==null?void 0:q.message},React.createElement(d,T(c({},m("collectionAddress")),{placeholder:"Collection public key"}))),React.createElement(D,{label:"Voucher Name",error:(ae=g.voucherName)==null?void 0:ae.message},React.createElement(d,T(c({},m("voucherName")),{placeholder:"Summer Sale Voucher"}))),React.createElement(D,{label:"Recipient Address",error:(le=g.recipient)==null?void 0:le.message},React.createElement(d,T(c({},m("recipient")),{placeholder:"Recipient wallet address"})))),React.createElement(M,{title:"Metadata Upload Method"},React.createElement(ge,{value:e,onValueChange:H=>v(H)},React.createElement(de,{className:"grid w-full grid-cols-2"},React.createElement(te,{value:"uri",className:"flex items-center gap-2"},React.createElement(Link,{className:"h-4 w-4"}),"Pre-uploaded URI"),React.createElement(te,{value:"image",className:"flex items-center gap-2"},React.createElement(Upload,{className:"h-4 w-4"}),"Upload Image")),React.createElement(re,{value:"uri",className:"space-y-4"},React.createElement(D,{label:"Metadata URI",error:(pe=g.metadataUri)==null?void 0:pe.message},React.createElement(d,T(c({},m("metadataUri")),{placeholder:"https://arweave.net/..."}))),React.createElement(_,null,React.createElement(G,null,"Provide a pre-uploaded metadata URI. The image and metadata should already be uploaded to Arweave or another decentralized storage."))),React.createElement(re,{value:"image",className:"space-y-4"},React.createElement(D,{label:"Voucher Image"},React.createElement("div",{className:"flex items-center gap-4"},React.createElement(d,{type:"file",accept:"image/*",onChange:n,className:"flex-1"}),o&&React.createElement("div",{className:"text-sm text-gray-600"},"Selected: ",o.name))),React.createElement(_,null,React.createElement(G,null,"Upload an image file. The protocol will automatically upload it to Irys and generate metadata."))))),React.createElement(M,{title:"Voucher Configuration"},React.createElement(D,{label:"Voucher Type",error:(k=(ue=g.voucherData)==null?void 0:ue.type)==null?void 0:k.message},React.createElement(Bt,{onValueChange:H=>S("voucherData.type",H),defaultValue:f("voucherData.type")},React.createElement(Ye,null,React.createElement(It,{placeholder:"Select voucher type"})),React.createElement(Xe,null,React.createElement(be,{value:"percentage_off"},"Percentage Off"),React.createElement(be,{value:"fixed_verxio_credits"},"Fixed Credits"),React.createElement(be,{value:"free_item"},"Free Item"),React.createElement(be,{value:"buy_one_get_one"},"Buy One Get One"),React.createElement(be,{value:"custom_reward"},"Custom Reward")))),React.createElement(D,{label:"Value",error:(O=(L=g.voucherData)==null?void 0:L.value)==null?void 0:O.message},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(d,T(c({type:"number"},m("voucherData.value",{valueAsNumber:true})),{placeholder:"15"})),React.createElement("span",{className:"text-sm text-gray-500"},f("voucherData.type")==="percentage_off"?"%":"credits"))),React.createElement(D,{label:"Max Uses",error:(Ne=(oe=g.voucherData)==null?void 0:oe.maxUses)==null?void 0:Ne.message},React.createElement(d,T(c({type:"number"},m("voucherData.maxUses",{valueAsNumber:true})),{placeholder:"1"}))),React.createElement(D,{label:"Expiry Date",error:(Ae=(Oe=g.voucherData)==null?void 0:Oe.expiryDate)==null?void 0:Ae.message},React.createElement(d,c({type:"datetime-local"},m("voucherData.expiryDate")))),React.createElement(D,{label:"Description",error:(at=(rt=g.voucherData)==null?void 0:rt.description)==null?void 0:at.message},React.createElement(xe,T(c({},m("voucherData.description")),{placeholder:"15% off your next purchase",rows:2}))),React.createElement(D,{label:"Merchant ID",error:(ot=(st=g.voucherData)==null?void 0:st.merchantId)==null?void 0:ot.message},React.createElement(d,T(c({},m("voucherData.merchantId")),{placeholder:"coffee_brew_merchant_001"})))),React.createElement(M,{title:"Conditions (Optional)"},React.createElement("div",{className:"space-y-3"},React.createElement(me,null,"Add conditions for voucher usage"),a.map((H,U)=>React.createElement("div",{key:U,className:"flex items-center gap-2"},React.createElement(d,{value:H,onChange:ee=>F(U,ee.target.value),placeholder:"Minimum purchase: $50"}),React.createElement(N,{type:"button",variant:"outline",size:"sm",onClick:()=>j(U)},"Remove"))),React.createElement(N,{type:"button",variant:"outline",onClick:x,className:"w-full"},"Add Condition"))),React.createElement("div",{className:"flex justify-end"},React.createElement(N,{type:"submit",disabled:t},t?"Minting Voucher...":"Mint Voucher"))))),w&&React.createElement("div",{className:"mt-8 p-6 bg-white rounded-xl shadow-lg border border-gray-200"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("h2",{className:"text-2xl font-bold text-gray-900"},"Voucher Minted Successfully!"),React.createElement("div",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium"},"Transaction Confirmed")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Transaction Signature:")),React.createElement("p",{className:"font-mono text-sm break-all"},w.signature))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Voucher Details"),React.createElement("div",{className:"space-y-2"},React.createElement("p",null,React.createElement("span",{className:"font-medium"},"Voucher Public Key:")),React.createElement("p",{className:"font-mono text-sm break-all"},w.asset.publicKey),React.createElement("p",null))),React.createElement("div",{className:"md:col-span-2 space-y-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"Next Steps"),React.createElement("div",{className:"p-4 bg-blue-50 rounded-lg"},React.createElement("p",{className:"text-blue-800"},"Your voucher has been minted successfully! You can now:"),React.createElement("ul",{className:"mt-2 list-disc list-inside text-blue-700"},React.createElement("li",null,"Validate the voucher using the ValidateVoucher form"),React.createElement("li",null,"Redeem the voucher when ready to use"),React.createElement("li",null,"Transfer the voucher to another wallet if transferable")))))))}var wa=cva("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ne(i){var e=i,{className:r,variant:s}=e,t=C(e,["className","variant"]);return z.createElement("div",c({className:V(wa({variant:s}),r)},t))}var Pa=z$1.object({voucherAddress:z$1.string().min(1,"Voucher address is required")});function Gt({onSuccess:r,onError:s}){var w;let[t,i]=useState(false),[e,v]=useState(null),o=useForm({resolver:zodResolver(Pa),defaultValues:{voucherAddress:""}}),{register:l,formState:{errors:a}}=o;return React.createElement(P,{form:o,onSubmit:async u=>{i(true);try{let p=await fetch("/api/validate-voucher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({voucherAddress:u.voucherAddress})});if(!p.ok){let S=await p.json();throw new Error(S.error||"Failed to fetch voucher details")}let y=(await p.json()).result.voucher,g={voucherData:y,conditions:y.conditions||[],warnings:[],errors:[]};y.expiryDate<=Date.now()?g.warnings.push("Voucher has expired"):y.expiryDate-Date.now()<24*60*60*1e3&&g.warnings.push("Voucher expires within 24 hours"),y.currentUses>=y.maxUses&&g.warnings.push("Voucher has reached maximum usage limit"),y.status!=="active"&&g.warnings.push(`Voucher status: ${y.status}`),v(g),o.reset(),r==null||r(g);}catch(p){console.error("Error fetching voucher details:",p),s==null||s(p);}finally{i(false);}}},React.createElement(K,null,React.createElement(J,null,React.createElement(Y,null,"This retrieves the voucher data for inspection and displays basic properties like expiry, usage limits, and conditions. Merchant validation happens during redemption.")),React.createElement(X,{className:"space-y-6"},React.createElement(M,{title:"Voucher Information"},React.createElement(D,{label:"Voucher Address",error:(w=a.voucherAddress)==null?void 0:w.message},React.createElement(d,T(c({},l("voucherAddress")),{placeholder:"Voucher public key"})))),React.createElement("div",{className:"flex justify-end"},React.createElement(N,{type:"submit",disabled:t},t?"Fetching...":"Fetch Voucher Details")),e&&React.createElement(M,{title:"Voucher Details"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(CheckCircle,{className:"h-5 w-5 text-green-500"}),React.createElement("span",{className:"font-medium"},"Voucher Found"),React.createElement(ne,{variant:"default"},"ACTIVE")),e.redemptionValue&&React.createElement("div",{className:"bg-green-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(Info,{className:"h-4 w-4 text-green-600"}),React.createElement("span",{className:"font-medium text-green-800"},"Redemption Value: ",e.redemptionValue," credits"))),e.voucherData&&React.createElement("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2"},React.createElement("h4",{className:"font-medium"},"Voucher Details"),React.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm"},React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Type:")," ",e.voucherData.type.replace("_"," ")),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Value:")," ",e.voucherData.value),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Current Uses:")," ",e.voucherData.currentUses),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Max Uses:")," ",e.voucherData.maxUses),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Status:")," ",e.voucherData.status),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Transferable:")," ",e.voucherData.transferable?"Yes":"No"),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Expiry:")," ",new Date(e.voucherData.expiryDate).toLocaleDateString()),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Issued:")," ",new Date(e.voucherData.issuedAt).toLocaleDateString()),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Merchant:")," ",e.voucherData.merchantId)),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Description:")," ",e.voucherData.description)),e.errors&&e.errors.length>0&&React.createElement("div",{className:"bg-red-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2 mb-2"},React.createElement(XCircle,{className:"h-4 w-4 text-red-600"}),React.createElement("span",{className:"font-medium text-red-800"},"Validation Errors")),React.createElement("ul",{className:"list-disc list-inside space-y-1 text-sm text-red-700"},e.errors.map((u,p)=>React.createElement("li",{key:p},u)))),e.warnings&&e.warnings.length>0&&React.createElement("div",{className:"bg-yellow-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2 mb-2"},React.createElement(AlertTriangle,{className:"h-4 w-4 text-yellow-600"}),React.createElement("span",{className:"font-medium text-yellow-800"},"Warnings")),React.createElement("ul",{className:"list-disc list-inside space-y-1 text-sm text-yellow-700"},e.warnings.map((u,p)=>React.createElement("li",{key:p},u)))),e.conditions&&e.conditions.length>0&&React.createElement("div",{className:"bg-blue-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2 mb-2"},React.createElement(Info,{className:"h-4 w-4 text-blue-600"}),React.createElement("span",{className:"font-medium text-blue-800"},"Redemption Conditions")),React.createElement("div",{className:"space-y-2"},e.conditions.map((u,p)=>React.createElement("div",{key:p,className:"bg-white p-3 rounded border border-blue-200"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(ne,{variant:"outline",className:"text-xs"},"Condition ",p+1)),React.createElement("p",{className:"text-sm text-blue-800 mt-1"},u)))),React.createElement("p",{className:"text-xs text-blue-600 mt-2"},"These conditions will be validated during redemption with proper context.")),e.voucherData.redemptionHistory&&e.voucherData.redemptionHistory.length>0&&React.createElement("div",{className:"bg-green-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2 mb-2"},React.createElement(Info,{className:"h-4 w-4 text-green-600"}),React.createElement("span",{className:"font-medium text-green-800"},"Redemption History")),React.createElement("div",{className:"space-y-2"},e.voucherData.redemptionHistory.map((u,p)=>React.createElement("div",{key:p,className:"bg-white p-3 rounded border border-green-200"},React.createElement("div",{className:"flex items-center justify-between mb-1"},React.createElement("span",{className:"font-medium text-green-900"},"Redemption #",p+1),React.createElement("span",{className:"text-xs text-green-600"},new Date(u.timestamp).toLocaleDateString())),React.createElement("div",{className:"text-sm text-green-800 space-y-1"},React.createElement("div",null,"Value: ",u.redemptionValue),u.transactionId&&React.createElement("div",null,"Transaction: ",u.transactionId),u.totalAmount&&React.createElement("div",null,"Total Amount: $",u.totalAmount),u.discountApplied&&React.createElement("div",null,"Discount Applied: $",u.discountApplied)))))))))))}var Da=z$1.object({voucherAddress:z$1.string().min(1,"Voucher address is required"),merchantId:z$1.string().min(1,"Merchant ID is required"),redemptionAmount:z$1.number().optional()});function $t({onSuccess:r,onError:s}){var u,p;let[t,i]=useState(false),[e,v]=useState(null),o=useForm({resolver:zodResolver(Da),defaultValues:{voucherAddress:"",merchantId:"",redemptionAmount:void 0}}),{register:l,handleSubmit:a,formState:{errors:h}}=o;return React.createElement(P,{form:o,onSubmit:async m=>{i(true);try{let y={voucherAddress:m.voucherAddress,merchantId:m.merchantId};m.redemptionAmount&&(y.redemptionAmount=m.redemptionAmount);let g=await fetch("/api/redeem-voucher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!g.ok){let f=await g.json();throw new Error(f.error||"Failed to redeem voucher")}let S=await g.json();v(S.result),r==null||r(S.result);}catch(y){console.error("Error redeeming voucher:",y),s==null||s(y);}finally{i(false);}}},React.createElement(K,null,React.createElement(J,null,React.createElement(Y,null,"Redeem a voucher for its value. This performs comprehensive validation (merchant ID, expiry, usage limits, conditions) and executes the redemption with complete history tracking.")),React.createElement(X,{className:"space-y-6"},React.createElement(M,{title:"Voucher Information"},React.createElement(D,{label:"Voucher Address",error:(u=h.voucherAddress)==null?void 0:u.message},React.createElement(d,T(c({},l("voucherAddress")),{placeholder:"Voucher public key"}))),React.createElement(D,{label:"Merchant ID",error:(p=h.merchantId)==null?void 0:p.message},React.createElement(d,T(c({},l("merchantId")),{placeholder:"coffee_brew_merchant_001"}))),React.createElement(D,{label:"Redemption Amount"},React.createElement(d,T(c({type:"number"},l("redemptionAmount",{valueAsNumber:true})),{placeholder:"100"})),React.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Required for percentage-based vouchers to calculate redemption value"))),React.createElement("div",{className:"flex justify-end"},React.createElement(N,{type:"submit",disabled:t},t?"Redeeming...":"Redeem Voucher")),e&&React.createElement(M,{title:"Redemption Results"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center gap-2"},e.success?React.createElement(CheckCircle,{className:"h-5 w-5 text-green-500"}):React.createElement(CheckCircle,{className:"h-5 w-5 text-red-500"}),React.createElement("span",{className:"font-medium"},"Status: ",e.success?"Successfully Redeemed":"Redemption Failed"),React.createElement(ne,{variant:e.success?"default":"destructive"},e.success?"REDEEMED":"FAILED")),e.redemptionValue&&React.createElement("div",{className:"bg-green-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("span",{className:"font-medium text-green-800"},"Redemption Value: ",e.redemptionValue," credits"))),e.updatedVoucher&&React.createElement("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2"},React.createElement("h4",{className:"font-medium"},"Updated Voucher Details"),React.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm"},React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Type:")," ",e.updatedVoucher.type.replace("_"," ")),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Value:")," ",e.updatedVoucher.value),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Current Uses:")," ",e.updatedVoucher.currentUses),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Max Uses:")," ",e.updatedVoucher.maxUses),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Status:")," ",e.updatedVoucher.status),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Merchant:")," ",e.updatedVoucher.merchantId)),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Description:")," ",e.updatedVoucher.description),e.updatedVoucher.redemptionHistory&&e.updatedVoucher.redemptionHistory.length>0&&React.createElement("div",{className:"mt-4"},React.createElement("h5",{className:"font-medium text-sm mb-2"},"Redemption History"),React.createElement("div",{className:"space-y-2"},e.updatedVoucher.redemptionHistory.map((m,y)=>React.createElement("div",{key:y,className:"bg-white p-2 rounded border text-xs"},React.createElement("div",{className:"flex justify-between"},React.createElement("span",null,"Redemption #",y+1),React.createElement("span",null,new Date(m.timestamp).toLocaleDateString())),React.createElement("div",null,"Value: ",m.redemptionValue),m.transactionId&&React.createElement("div",null,"Transaction: ",m.transactionId)))))),e.errors&&e.errors.length>0&&React.createElement("div",{className:"bg-red-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2 mb-2"},React.createElement(CheckCircle,{className:"h-4 w-4 text-red-600"}),React.createElement("span",{className:"font-medium text-red-800"},"Redemption Errors")),React.createElement("ul",{className:"list-disc list-inside space-y-1 text-sm text-red-700"},e.errors.map((m,y)=>React.createElement("li",{key:y},m)))),e.signature&&React.createElement("div",{className:"bg-blue-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2 mb-2"},React.createElement("span",{className:"font-medium text-blue-800"},"Transaction Signature")),React.createElement("div",{className:"bg-white p-3 rounded border border-blue-200"},React.createElement("code",{className:"text-xs text-blue-700 break-all font-mono"},e.signature)),React.createElement("p",{className:"text-xs text-blue-600 mt-2"},"This voucher has been redeemed!")))))))}var La=z$1.object({userAddress:z$1.string().min(1,"User address is required"),filters:z$1.object({status:z$1.enum(["active","expired","fully_used"]).optional(),type:z$1.string().optional(),minValue:z$1.number().optional()}).optional(),sortBy:z$1.enum(["expiryDate","value","createdAt"]).optional(),sortOrder:z$1.enum(["asc","desc"]).optional(),limit:z$1.number().optional()});function Kt({onSuccess:r,onError:s}){var f;let[t,i]=useState(false),[e,v]=useState(null),[o,l]=useState([]),a=useForm({resolver:zodResolver(La),defaultValues:{userAddress:""}}),{register:h,handleSubmit:w,formState:{errors:u},setValue:p,watch:m}=a,y=async n=>{i(true);try{let x={userAddress:n.userAddress},F=await fetch("/api/get-user-vouchers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!F.ok){let E=await F.json();throw new Error(E.error||"Failed to get user vouchers")}let j=await F.json();v(j.result),a.reset(),r==null||r(j.result);}catch(x){console.error("Error getting user vouchers:",x),s==null||s(x);}finally{i(false);}};function g(n){var x;return (x=n.voucherData)!=null&&x.status?n.voucherData.status.toUpperCase():n.isExpired?"EXPIRED":n.canRedeem?"ACTIVE":n.remainingUses===0?"USED":"INACTIVE"}function S(n){if(!n||isNaN(n)||n<=0)return "Expired";let x=Math.floor(n/1e3),F=Math.floor(x/(60*60*24)),j=Math.floor(x%(60*60*24)/(60*60)),E=Math.floor(x%(60*60)/60),q=[];return F>0&&q.push(`${F} day${F>1?"s":""}`),j>0&&q.push(`${j} hour${j>1?"s":""}`),E>0&&q.push(`${E} minute${E>1?"s":""}`),q.length===0?"< 1 minute":q.join(", ")}return React.createElement(P,{form:a,onSubmit:y},React.createElement(K,null,React.createElement(J,null,React.createElement(Y,null,"Retrieve all vouchers for a specific user with filtering and sorting options.")),React.createElement(X,{className:"space-y-6"},React.createElement(M,{title:"User Information"},React.createElement(D,{label:"User Address",error:(f=u.userAddress)==null?void 0:f.message},React.createElement(d,T(c({},h("userAddress")),{placeholder:"User wallet address"})))),React.createElement("div",{className:"flex justify-end"},React.createElement(N,{type:"submit",disabled:t},t?"Fetching Vouchers...":"Get User Vouchers")),e&&React.createElement(React.Fragment,null,e.summary&&React.createElement("div",{className:"mb-4 p-4 bg-gray-50 rounded-lg grid grid-cols-2 md:grid-cols-4 gap-4"},React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Total:")," ",e.summary.totalCount),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Active:")," ",e.summary.activeVouchers),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Used:")," ",e.summary.usedVouchers),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Expired:")," ",e.summary.expiredVouchers),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Cancelled:")," ",e.summary.cancelledVouchers),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Total Value:")," ",e.summary.totalValue),React.createElement("div",{className:"col-span-2"},React.createElement("span",{className:"font-medium"},"By Merchant:"),React.createElement("ul",{className:"ml-2"},Object.entries(e.summary.byMerchant||{}).map(([n,x])=>React.createElement("li",{key:n},n,": ",x)))),React.createElement("div",{className:"col-span-2"},React.createElement("span",{className:"font-medium"},"By Type:"),React.createElement("ul",{className:"ml-2"},Object.entries(e.summary.byType||{}).map(([n,x])=>React.createElement("li",{key:n},n,": ",x))))),e.vouchers&&e.vouchers.length>0&&React.createElement("div",{className:"space-y-3"},React.createElement("h4",{className:"font-medium"},"Voucher List"),e.vouchers.map((n,x)=>{var j,E,q,ae,le,pe,ue,k,L;let F=o.includes(x);return React.createElement("div",{key:x,className:"bg-gray-50 rounded-lg border border-gray-200"},React.createElement("button",{type:"button",className:"w-full flex items-center justify-between px-4 py-3 focus:outline-none hover:bg-gray-100 rounded-t-lg",onClick:()=>{l(O=>O.includes(x)?O.filter(oe=>oe!==x):[...O,x]);}},React.createElement("span",{className:"font-medium text-left"},n.name||`Voucher ${x+1}`),React.createElement("div",{className:"flex items-center gap-2"},React.createElement(ne,{variant:g(n)==="ACTIVE"?"default":"secondary"},g(n)),React.createElement("span",{className:`transition-transform ${F?"rotate-90":""}`},"\u25B6"))),F&&React.createElement("div",{className:"px-4 pb-4 pt-2 space-y-2 border-t border-gray-200"},React.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm"},React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Address:")," ",n.voucherAddress),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Type:")," ",(j=n.voucherData)==null?void 0:j.type),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Value:")," ",(E=n.voucherData)==null?void 0:E.value),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Uses:")," ",(q=n.voucherData)==null?void 0:q.currentUses,"/",(ae=n.voucherData)==null?void 0:ae.maxUses),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Issued At:")," ",(le=n.voucherData)!=null&&le.issuedAt?new Date(n.voucherData.issuedAt).toLocaleDateString():"N/A"),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Expiry Date:")," ",(pe=n.voucherData)!=null&&pe.expiryDate?new Date(n.voucherData.expiryDate).toLocaleDateString():"N/A")),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Description:")," ",(ue=n.voucherData)==null?void 0:ue.description),((k=n.voucherData)==null?void 0:k.conditions)&&n.voucherData.conditions.length>0&&React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Conditions:"),React.createElement("ul",{className:"list-disc list-inside ml-2 text-sm"},n.voucherData.conditions.map((O,oe)=>React.createElement("li",{key:oe},O)))),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Can Redeem:")," ",n.canRedeem?"Yes":"No"),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Remaining Uses:")," ",n.remainingUses),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Time Until Expiry:")," ",(L=n.voucherData)!=null&&L.expiryDate?S(n.voucherData.expiryDate-Date.now()):"N/A"),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"URI:")," ",React.createElement("a",{href:n.uri,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline"},n.uri))))})),(!e.vouchers||e.vouchers.length===0)&&React.createElement("div",{className:"bg-gray-50 p-4 rounded-lg text-center"},React.createElement("span",{className:"text-gray-600"},"No vouchers found for this user"))))))}var Ia=z$1.object({voucherAddress:z$1.string().min(1,"Voucher address is required"),newExpiryDate:z$1.string().min(1,"New expiry date is required"),reason:z$1.string().min(1,"Reason is required")});function Qt({onSuccess:r,onError:s}){var p,m,y;let[t,i]=useState(false),[e,v]=useState(null),o=useForm({resolver:zodResolver(Ia),defaultValues:{voucherAddress:"",newExpiryDate:"",reason:""}}),{register:l,handleSubmit:a,formState:{errors:h},setValue:w}=o;return React.createElement(P,{form:o,onSubmit:async g=>{i(true);try{let S={voucherAddress:g.voucherAddress,newExpiryDate:g.newExpiryDate,reason:g.reason},f=await fetch("/api/extend-voucher-expiry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!f.ok){let x=await f.json();throw new Error(x.error||"Failed to extend voucher expiry")}let n=await f.json();console.log(n),v(n.result),o.reset(),r==null||r(n.result);}catch(S){console.error("Error extending voucher expiry:",S),s==null||s(S);}finally{i(false);}}},React.createElement(K,null,React.createElement(J,null,React.createElement(Y,null,"Extend the expiration date of a voucher with a reason for tracking.")),React.createElement(X,{className:"space-y-6"},React.createElement(M,{title:"Voucher Information"},React.createElement(D,{label:"Voucher Address",error:(p=h.voucherAddress)==null?void 0:p.message},React.createElement(d,T(c({},l("voucherAddress")),{placeholder:"Voucher public key"})))),React.createElement(M,{title:"Extension Details"},React.createElement(D,{label:"New Expiry Date",error:(m=h.newExpiryDate)==null?void 0:m.message},React.createElement(d,c({type:"datetime-local"},l("newExpiryDate"))),React.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Select a new expiration date and time for the voucher")),React.createElement(D,{label:"Reason for Extension",error:(y=h.reason)==null?void 0:y.message},React.createElement(xe,T(c({},l("reason")),{placeholder:"Customer request, technical issue, etc.",rows:3})),React.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Provide a reason for extending the voucher expiry (required for tracking)"))),React.createElement(_,null,React.createElement(G,null,React.createElement("div",{className:"flex items-center gap-2"},React.createElement(Clock,{className:"h-4 w-4"}),React.createElement("span",null,"Extending voucher expiry will update the voucher's expiration date. This action is tracked for audit purposes.")))),React.createElement("div",{className:"flex justify-end"},React.createElement(N,{type:"submit",disabled:t},t?"Extending Expiry...":"Extend Voucher Expiry")),e&&React.createElement(M,{title:"Extension Results"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(CheckCircle,{className:"h-5 w-5 text-green-500"}),React.createElement("span",{className:"font-medium"},"Voucher Expiry Extended Successfully"),React.createElement(ne,{variant:"default"},"EXTENDED")),React.createElement("div",{className:"bg-green-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2 mb-2"},React.createElement(Calendar,{className:"h-4 w-4 text-green-600"}),React.createElement("span",{className:"font-medium text-green-800"},"New Expiry Date")),React.createElement("div",{className:"text-sm text-green-700"},new Date(e.updatedVoucher.expiryDate).toLocaleString())),e.previousExpiryDate&&React.createElement("div",{className:"bg-gray-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2 mb-2"},React.createElement(Clock,{className:"h-4 w-4 text-gray-600"}),React.createElement("span",{className:"font-medium text-gray-800"},"Date of Issue")),React.createElement("div",{className:"text-sm text-gray-700"},new Date(e.updatedVoucher.issuedAt).toLocaleString())),e.updatedVoucher&&React.createElement("div",{className:"bg-blue-50 p-4 rounded-lg space-y-2"},React.createElement("h4",{className:"font-medium text-blue-800"},"Updated Voucher Details"),React.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm text-blue-700"},React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Type:")," ",e.updatedVoucher.type),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Value:")," ",e.updatedVoucher.value),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Current Uses:")," ",e.updatedVoucher.currentUses),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Max Uses:")," ",e.updatedVoucher.maxUses),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Status:")," ",e.updatedVoucher.status),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Merchant ID:")," ",e.updatedVoucher.merchantId)),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Description:")," ",e.updatedVoucher.description)),e.signature&&React.createElement("div",{className:"bg-purple-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(CheckCircle,{className:"h-4 w-4 text-purple-600"}),React.createElement("span",{className:"font-medium text-purple-800"},"Transaction Signature: ",e.signature))))))))}var qa=z$1.object({voucherAddress:z$1.string().min(1,"Voucher address is required"),reason:z$1.string().min(1,"Reason is required")});function ar({onSuccess:r,onError:s}){var p,m;let[t,i]=useState(false),[e,v]=useState(null),o=useForm({resolver:zodResolver(qa),defaultValues:{voucherAddress:"",reason:""}}),{register:l,handleSubmit:a,formState:{errors:h},setValue:w}=o;return React.createElement(P,{form:o,onSubmit:async y=>{i(true);try{let g={voucherAddress:y.voucherAddress,reason:y.reason},S=await fetch("/api/cancel-voucher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!S.ok){let n=await S.json();throw new Error(n.error||"Failed to cancel voucher")}let f=await S.json();v(f.result),o.reset(),r==null||r(f.result);}catch(g){console.error("Error canceling voucher:",g),s==null||s(g);}finally{i(false);}}},React.createElement(K,null,React.createElement(J,null,React.createElement(Y,null,"Cancel a voucher with a reason for tracking. This action cannot be undone.")),React.createElement(X,{className:"space-y-6"},React.createElement(_,{variant:"destructive"},React.createElement(AlertTriangle,{className:"h-4 w-4"}),React.createElement(G,null,React.createElement("strong",null,"Warning:")," Canceling a voucher will permanently disable it. This action cannot be undone and the voucher will no longer be redeemable.")),React.createElement(M,{title:"Voucher Information"},React.createElement(D,{label:"Voucher Address",error:(p=h.voucherAddress)==null?void 0:p.message},React.createElement(d,T(c({},l("voucherAddress")),{placeholder:"Voucher public key"})))),React.createElement(M,{title:"Cancellation Details"},React.createElement(D,{label:"Reason for Cancellation",error:(m=h.reason)==null?void 0:m.message},React.createElement(xe,T(c({},l("reason")),{placeholder:"Customer refund, merchant request, technical issue, etc.",rows:4})),React.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Provide a detailed reason for canceling the voucher (required for audit tracking)"))),React.createElement(_,null,React.createElement(G,null,React.createElement("div",{className:"flex items-center gap-2"},React.createElement(XCircle,{className:"h-4 w-4"}),React.createElement("span",null,"Canceling a voucher will mark it as cancelled and prevent any future redemptions. This action is tracked for audit and compliance purposes.")))),React.createElement("div",{className:"flex justify-end"},React.createElement(N,{type:"submit",disabled:t,variant:"destructive"},t?"Canceling Voucher...":"Cancel Voucher")),e&&React.createElement(M,{title:"Cancellation Results"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(CheckCircle,{className:"h-5 w-5 text-green-500"}),React.createElement("span",{className:"font-medium"},"Voucher Cancelled Successfully"),React.createElement(ne,{variant:"destructive"},"CANCELLED")),React.createElement("div",{className:"bg-red-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2 mb-2"},React.createElement(XCircle,{className:"h-4 w-4 text-red-600"}),React.createElement("span",{className:"font-medium text-red-800"},"Cancellation Status")),React.createElement("div",{className:"text-sm text-red-700"},"The voucher has been permanently cancelled and is no longer redeemable.")),e.updatedVoucher&&React.createElement("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2"},React.createElement("h4",{className:"font-medium"},"Updated Voucher Details"),React.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm"},React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Type:")," ",e.updatedVoucher.type),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Value:")," ",e.updatedVoucher.value),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Current Uses:")," ",e.updatedVoucher.currentUses),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Max Uses:")," ",e.updatedVoucher.maxUses),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Status:")," ",e.updatedVoucher.status),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Merchant ID:")," ",e.updatedVoucher.merchantId)),React.createElement("div",null,React.createElement("span",{className:"font-medium"},"Description:")," ",e.updatedVoucher.description)),e.signature&&React.createElement("div",{className:"bg-blue-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(CheckCircle,{className:"h-4 w-4 text-blue-600"}),React.createElement("span",{className:"font-medium text-blue-800"},"Transaction Signature: ",e.signature))),React.createElement("div",{className:"bg-yellow-50 p-4 rounded-lg"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(AlertTriangle,{className:"h-4 w-4 text-yellow-600"}),React.createElement("span",{className:"font-medium text-yellow-800"},"Important Note")),React.createElement("div",{className:"text-sm text-yellow-700 mt-1"},"The voucher cancellation has been recorded on the blockchain. The voucher is now permanently disabled and cannot be reactivated or redeemed.")))))))}
export{_ as Alert,G as AlertDescription,xr as AlertTitle,bt as ApproveTransferForm,kt as AwardLoyaltyPointsForm,Lt as BroadcastsForm,N as Button,ar as CancelVoucherForm,ft as CreateLoyaltyProgramForm,Mt as CreateVoucherCollectionForm,Qt as ExtendVoucherExpiryForm,We as Form,ze as FormControl,Le as FormDescription,$e as FormField,De as FormItem,ke as FormLabel,Me as FormMessage,Pt as GetAssetDataForm,Tt as GetProgramDetailsForm,Kt as GetUserVouchersForm,St as GiftLoyaltyPointsForm,d as Input,yt as IssueLoyaltyPassForm,me as Label,wt as MessagingForm,qt as MintVoucherForm,$t as RedeemVoucherForm,Vt as RevokeLoyaltyPointsForm,vt as UpdateLoyaltyProgramForm,Gt as ValidateVoucherForm,P as VerxioForm,b as VerxioFormField,A as VerxioFormSection};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map